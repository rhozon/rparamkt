<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Análise básica de dados: analisando dados secundários | R para Estudantes de Marketing</title>
  <meta name="description" content="Análise básica de dados: analisando dados secundários | R para Estudantes de Marketing" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Análise básica de dados: analisando dados secundários | R para Estudantes de Marketing" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Análise básica de dados: analisando dados secundários | R para Estudantes de Marketing" />
  
  
  

<meta name="author" content="KU Leuven Marketing department (tradução: Rodrigo Hermont Ozon)" />


<meta name="date" content="2020-09-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introdução-ao-r.html"/>
<link rel="next" href="regressão-linear.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R para Estudantes de Marketing</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Sobre o autor desta tradução</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#resumo"><i class="fa fa-check"></i>Resumo</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sobre-este-tutorial.html"><a href="sobre-este-tutorial.html"><i class="fa fa-check"></i>Sobre este tutorial</a><ul>
<li class="chapter" data-level="" data-path="sobre-este-tutorial.html"><a href="sobre-este-tutorial.html#download-e-instalação-do-r-e-do-rstudio"><i class="fa fa-check"></i>Download e instalação do R e do RStudio</a></li>
<li class="chapter" data-level="" data-path="sobre-este-tutorial.html"><a href="sobre-este-tutorial.html#obtendo-familiaridade-com-o-studio"><i class="fa fa-check"></i>Obtendo familiaridade com o Studio</a><ul>
<li class="chapter" data-level="" data-path="sobre-este-tutorial.html"><a href="sobre-este-tutorial.html#console-vs.-script"><i class="fa fa-check"></i>Console vs. script</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sobre-este-tutorial.html"><a href="sobre-este-tutorial.html#comentários"><i class="fa fa-check"></i>Comentários</a></li>
<li class="chapter" data-level="" data-path="sobre-este-tutorial.html"><a href="sobre-este-tutorial.html#pacotes"><i class="fa fa-check"></i>Pacotes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html"><i class="fa fa-check"></i>Introdução ao R</a><ul>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#importando-dados"><i class="fa fa-check"></i>Importando dados</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#importando-arquivos-.csv"><i class="fa fa-check"></i>Importando arquivos .csv</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#ajustando-seu-diretório-de-trabalho"><i class="fa fa-check"></i>Ajustando seu diretório de trabalho</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#atribuindo-dados-a-objetos"><i class="fa fa-check"></i>Atribuindo dados a objetos</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#importando-arquivos-do-excel"><i class="fa fa-check"></i>Importando arquivos do Excel</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#lendo-os-dados-do-airbnb"><i class="fa fa-check"></i>Lendo os dados do Airbnb</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#manipulando-dataframes"><i class="fa fa-check"></i>Manipulando dataframes</a><ul>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#transformando-variáveis"><i class="fa fa-check"></i>Transformando variáveis</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#transformações-numéricas"><i class="fa fa-check"></i>Transformações numéricas</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#transformando-variáveis-com-a-função-mutate"><i class="fa fa-check"></i>Transformando variáveis com a função mutate</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#incluindo-ou-excluindo-e-renomeando-variáveis-colunas"><i class="fa fa-check"></i>Incluindo ou excluindo e renomeando variáveis (colunas)</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#incluindo-ou-excluindo-observações-linhas"><i class="fa fa-check"></i>Incluindo ou excluindo observações (linhas)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#o-operador-pipe"><i class="fa fa-check"></i>O operador pipe</a><ul>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#uma-maneira-de-escrever-o-código"><i class="fa fa-check"></i>Uma maneira de escrever o código</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#agrupando-e-resumindo"><i class="fa fa-check"></i>Agrupando e resumindo</a><ul>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#tabelas-de-frequência"><i class="fa fa-check"></i>Tabelas de frequência</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#estatísticas-descritivas"><i class="fa fa-check"></i>Estatísticas Descritivas</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#exportando-summaries-dos-dados"><i class="fa fa-check"></i>Exportando (summaries) dos dados</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#gráficos"><i class="fa fa-check"></i>Gráficos</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#diagrama-de-dispersão-scatterplot"><i class="fa fa-check"></i>Diagrama de dispersão (scatterplot)</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#jitter"><i class="fa fa-check"></i>Jitter</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#histograma"><i class="fa fa-check"></i>Histograma</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#transformação-logarítmica"><i class="fa fa-check"></i>Transformação logarítmica</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#plotando-a-mediana"><i class="fa fa-check"></i>Plotando a mediana</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#plotando-a-média"><i class="fa fa-check"></i>Plotando a média</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#salvando-imagens"><i class="fa fa-check"></i>Salvando imagens</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html"><i class="fa fa-check"></i>Análise básica de dados: analisando dados secundários</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#dados"><i class="fa fa-check"></i>Dados</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#importação"><i class="fa fa-check"></i>Importação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#manipulação"><i class="fa fa-check"></i>Manipulação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#mesclando-datasets"><i class="fa fa-check"></i>Mesclando datasets</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#recapitulando-importação-e-manipulação"><i class="fa fa-check"></i>Recapitulando: importação e manipulação</a></li>
<li><a href="análise-básica-de-dados-analisando-dados-secundários.html#amostras-independentes-teste-t">Amostras independentes: teste <span class="math inline">\(t\)</span></a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#anova-univariada"><i class="fa fa-check"></i>ANOVA univariada</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#suposição-de-normalidade-de-resíduos"><i class="fa fa-check"></i>Suposição de normalidade de resíduos</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#suposição-homogeneidade-de-variâncias"><i class="fa fa-check"></i>Suposição: homogeneidade de variâncias</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#anova"><i class="fa fa-check"></i>ANOVA</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#teste-de-tuckey-de-diferença-significativa-verdadeira"><i class="fa fa-check"></i>Teste de Tuckey de diferença significativa verdadeira</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="regressão-linear.html"><a href="regressão-linear.html"><i class="fa fa-check"></i>Regressão Linear</a><ul>
<li class="chapter" data-level="" data-path="regressão-linear.html"><a href="regressão-linear.html#regressão-linear-simples"><i class="fa fa-check"></i>Regressão Linear Simples</a></li>
<li class="chapter" data-level="" data-path="regressão-linear.html"><a href="regressão-linear.html#correlação"><i class="fa fa-check"></i>Correlação</a></li>
<li class="chapter" data-level="" data-path="regressão-linear.html"><a href="regressão-linear.html#regressão-linear-múltipla-com-interação"><i class="fa fa-check"></i>Regressão linear múltipla, com interação</a></li>
<li class="chapter" data-level="" data-path="regressão-linear.html"><a href="regressão-linear.html#premissas"><i class="fa fa-check"></i>Premissas</a></li>
<li class="chapter" data-level="" data-path="regressão-linear.html"><a href="regressão-linear.html#normalidade-de-resíduos"><i class="fa fa-check"></i>Normalidade de resíduos</a></li>
<li class="chapter" data-level="" data-path="regressão-linear.html"><a href="regressão-linear.html#homocedasticidade-de-resíduos"><i class="fa fa-check"></i>Homocedasticidade de resíduos</a></li>
<li class="chapter" data-level="" data-path="regressão-linear.html"><a href="regressão-linear.html#multicolinearidade"><i class="fa fa-check"></i>Multicolinearidade</a></li>
<li><a href="regressão-linear.html#teste-chi2">Teste <span class="math inline">\(\chi^{2}\)</span></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="regressão-logística-opcional.html"><a href="regressão-logística-opcional.html"><i class="fa fa-check"></i>Regressão Logística (opcional)</a><ul>
<li class="chapter" data-level="" data-path="regressão-logística-opcional.html"><a href="regressão-logística-opcional.html#medindo-o-ajuste-de-uma-regressão-logística-porcentagem-classificada-corretamente"><i class="fa fa-check"></i>Medindo o ajuste de uma regressão logística: porcentagem classificada corretamente</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html"><i class="fa fa-check"></i>Análise Básica de Dados: Experimentos</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#dados"><i class="fa fa-check"></i>Dados</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#importação"><i class="fa fa-check"></i>Importação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#manipulação"><i class="fa fa-check"></i>Manipulação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#fatorar-algumas-variáveis"><i class="fa fa-check"></i>Fatorar algumas variáveis</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#calcular-a-consistência-interna-e-a-média-de-perguntas-que-medem-o-mesmo-conceito"><i class="fa fa-check"></i>Calcular a consistência interna e a média de perguntas que medem o mesmo conceito</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#recapitulando-importando-e-manipulando"><i class="fa fa-check"></i>Recapitulando: importando e manipulando</a></li>
</ul></li>
<li><a href="análise-básica-de-dados-experimentos.html#teste-t">Teste <span class="math inline">\(t\)</span></a><ul>
<li><a href="análise-básica-de-dados-experimentos.html#teste-t-para-amostras-independentes">Teste <span class="math inline">\(t\)</span> para amostras independentes</a></li>
<li><a href="análise-básica-de-dados-experimentos.html#teste-t-para-amostras-dependentes">Teste <span class="math inline">\(t\)</span> para amostras dependentes</a></li>
<li><a href="análise-básica-de-dados-experimentos.html#teste-t-para-amostra-única">Teste <span class="math inline">\(t\)</span> para amostra única</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#anova-bivariada"><i class="fa fa-check"></i>ANOVA Bivariada</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#seguindo-com-contrastes"><i class="fa fa-check"></i>Seguindo com contrastes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#análise-de-moderação-interação-entre-variáveis-independentes-contínuas-e-categóricas"><i class="fa fa-check"></i>Análise de moderação: interação entre variáveis independentes contínuas e categóricas</a><ul>
<li><a href="análise-básica-de-dados-experimentos.html#análise-spotlight">Análise <em>spotlight</em></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#análise-ancova"><i class="fa fa-check"></i>Análise ANCOVA</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#medidas-repetidas-anova"><i class="fa fa-check"></i>Medidas repetidas ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><i class="fa fa-check"></i>Análise de componentes principais para mapas perceptivos (office dataset)</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#dados"><i class="fa fa-check"></i>Dados</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#importação"><i class="fa fa-check"></i>Importação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#manipulação"><i class="fa fa-check"></i>Manipulação</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#recapitulação-importação-e-manipulação"><i class="fa fa-check"></i>Recapitulação: importação e manipulação</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#quantos-fatores-devemos-considerar"><i class="fa fa-check"></i>Quantos fatores devemos considerar ?</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#análise-de-componentes-principais"><i class="fa fa-check"></i>Análise de Componentes Principais</a><ul>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#cargas-fatoriais"><i class="fa fa-check"></i>Cargas fatoriais</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#plotando-as-cargas-fatoriais"><i class="fa fa-check"></i>Plotando as cargas fatoriais</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-toothpaste-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-toothpaste-dataset.html"><i class="fa fa-check"></i>Análise de componentes principais para mapas perceptivos (toothpaste dataset)</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#dados"><i class="fa fa-check"></i>Dados</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#importação"><i class="fa fa-check"></i>Importação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#manipulação"><i class="fa fa-check"></i>Manipulação</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#recapitulação-importação-e-manipulação"><i class="fa fa-check"></i>Recapitulação: importação e manipulação</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#quantos-fatores-devemos-considerar"><i class="fa fa-check"></i>Quantos fatores devemos considerar ?</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#análise-de-componentes-principais"><i class="fa fa-check"></i>Análise de Componentes Principais</a><ul>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#cargas-fatoriais"><i class="fa fa-check"></i>Cargas fatoriais</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-toothpaste-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-toothpaste-dataset.html#gráfico-das-cargas-fatoriais"><i class="fa fa-check"></i>Gráfico das cargas fatoriais</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R para Estudantes de Marketing</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="análise-básica-de-dados-analisando-dados-secundários" class="section level1 unlisted unnumbered">
<h1>Análise básica de dados: analisando dados secundários</h1>
<p>Neste capítulo, analisaremos os dados do Airbnb.com. A introdução tem mais informações sobre esses dados.</p>
<div id="dados" class="section level2 unlisted unnumbered">
<h2>Dados</h2>
<div id="importação" class="section level3 unlisted unnumbered">
<h3>Importação</h3>
<p>Você pode baixar o conjunto de dados clicando com o botão direito do mouse <a href="http://users.telenet.be/samuelfranssens/tutorial_data/tomslee_airbnb_belgium_1454_2017-07-14.csv">nesse link</a>, selecionando “Salvar link como…” (ou algo semelhante) e salvando o arquivo .csv em um diretório no disco rígido. Como mencionado na introdução, é uma boa ideia salvar seu trabalho em um diretório que é automaticamente copiado pelo software de compartilhamento de arquivos. Vamos importar os dados:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb74-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb74-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb74-2"></a><span class="co">#setwd(&quot;c:/Dropbox/work/teaching/R/&quot;) # Ajusta seu diretorio de trabalho</span></span>
<span id="cb74-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb74-3"></a></span>
<span id="cb74-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb74-4"></a>airbnb &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file=</span><span class="st">&quot;http://users.telenet.be/samuelfranssens/tutorial_data/tomslee_airbnb_belgium_1454_2017-07-14.csv&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb74-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb74-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">room_id =</span> <span class="kw">factor</span>(room_id), <span class="dt">host_id =</span> <span class="kw">factor</span>(host_id)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb74-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb74-6"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>country, <span class="op">-</span>survey_id) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># dropa country &amp; survey_id, veja a introdução de por que fazemos isso</span></span>
<span id="cb74-7"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb74-7"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">country =</span> city, <span class="dt">city =</span> borough) <span class="co"># renomeia city &amp; borough, veja a introdução de por que fazemos isso</span></span></code></pre></div>
<p>Não se esqueça de salvar seu script no diretório de trabalho.</p>
</div>
<div id="manipulação" class="section level3 unlisted unnumbered">
<h3>Manipulação</h3>
<p>Se você abrir o quadro de dados do airbnb em uma guia do Visualizador, verá que os bathrooms e o minstay são colunas vazias e que o local e last_modified não são muito informativos. Vamos remover estas variáveis:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb75-1"></a>airbnb &lt;-<span class="st"> </span>airbnb <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb75-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb75-2"></a><span class="st">  </span><span class="kw">select</span> (<span class="op">-</span>bathrooms, <span class="op">-</span>minstay, <span class="op">-</span>location, <span class="op">-</span>last_modified)</span></code></pre></div>
<p>Agora, dê uma olhada na variável overall_satisfaction:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb76-1"></a><span class="co"># use head() para imprimir apenas os primeiros valores de um vetor, para evitar uma lista muito longa</span></span>
<span id="cb76-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb76-2"></a><span class="co"># tail() imprime apenas os últimos valores de um vetor</span></span>
<span id="cb76-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb76-3"></a><span class="kw">head</span>(airbnb<span class="op">$</span>overall_satisfaction) </span></code></pre></div>
<pre><code>## [1] 4.5 0.0 4.0 4.5 5.0 5.0</code></pre>
<p>A segunda classificação é zero. Provavelmente, isso significa que a classificação está faltando, em vez de ser realmente zero. Vamos substituir os valores zero na overall_satisfaction por NA:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb78-1"></a>airbnb &lt;-<span class="st"> </span>airbnb <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb78-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb78-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">overall_satisfaction =</span> <span class="kw">replace</span>(overall_satisfaction, overall_satisfaction <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>)) </span>
<span id="cb78-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb78-3"></a>  </span>
<span id="cb78-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb78-4"></a><span class="co"># crie uma variavel &quot;nova&quot; overall_satisfaction que seja igual a overall_satisfaction com valores de NA em que overall_satisfaction seja igual a zero.</span></span>
<span id="cb78-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb78-5"></a></span>
<span id="cb78-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb78-6"></a><span class="co"># Digamos que desejassemos substituir NA por 0, entao o comando se tornaria: substitute(overall_satisfaction, is.na(overall_satisfaction), 0)</span></span>
<span id="cb78-7"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb78-7"></a><span class="co"># overall_satisfaction == NA nao funciona</span></span>
<span id="cb78-8"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb78-8"></a></span>
<span id="cb78-9"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb78-9"></a><span class="kw">head</span>(airbnb<span class="op">$</span>overall_satisfaction)</span></code></pre></div>
<pre><code>## [1] 4.5  NA 4.0 4.5 5.0 5.0</code></pre>
</div>
<div id="mesclando-datasets" class="section level3 unlisted unnumbered">
<h3>Mesclando datasets</h3>
<p>Posteriormente, testaremos se o preço está relacionado a determinadas características dos tipos de quartos. As características potencialmente interessantes são: room_type, city, reviews, overall_satisfaction, etc. Para torná-lo ainda mais interessante, podemos aumentar os dados, por exemplo, com dados disponíveis publicamente nas cidades. Reuni os tamanhos de população das cidades belgas mais populosas <a href="https://population.mongabay.com/population/belgium/">deste site</a>. Faça o download desses dados <a href="http://users.telenet.be/samuelfranssens/tutorial_data/population.xlsx">(aqui)</a> e importe-os para o R:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-1"></a><span class="co">#population &lt;- read_excel(&quot;population.xlsx&quot;,&quot;data&quot;)</span></span>
<span id="cb80-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-2"></a></span>
<span id="cb80-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-3"></a></span>
<span id="cb80-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-4"></a><span class="kw">library</span>(readxl)</span>
<span id="cb80-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-5"></a></span>
<span id="cb80-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-6"></a>url&lt;-<span class="st">&quot;http://users.telenet.be/samuelfranssens/tutorial_data/population.xlsx&quot;</span></span>
<span id="cb80-7"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-7"></a>population &lt;-<span class="st"> </span><span class="kw">tempfile</span>()</span>
<span id="cb80-8"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-8"></a><span class="kw">download.file</span>(url, population, <span class="dt">mode=</span><span class="st">&quot;wb&quot;</span>)</span>
<span id="cb80-9"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-9"></a>population&lt;-<span class="kw">read_excel</span>(<span class="dt">path =</span> population, <span class="dt">sheet =</span> <span class="dv">1</span>)</span>
<span id="cb80-10"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-10"></a></span>
<span id="cb80-11"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb80-11"></a>population</span></code></pre></div>
<pre><code>## # A tibble: 183 x 2
##    place     population
##    &lt;chr&gt;          &lt;dbl&gt;
##  1 Brussels     1019022
##  2 Antwerpen     459805
##  3 Gent          231493
##  4 Charleroi     200132
##  5 Liège         182597
##  6 Brugge        116709
##  7 Namur         106284
##  8 Leuven         92892
##  9 Mons           91277
## 10 Aalst          77534
## # ... with 173 more rows</code></pre>
<p>Agora, queremos vincular esses dados ao nosso quadro de dados do airbnb. Isso é muito fácil no R (mas é muito difícil, por exemplo, no Excel):</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb82-1"></a>airbnb.merged &lt;-<span class="st"> </span><span class="kw">left_join</span>(airbnb, population, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;city&quot;</span> =<span class="st"> &quot;place&quot;</span>))</span>
<span id="cb82-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb82-2"></a><span class="co"># o primeiro argumento eh o conjunto de dados que queremos aumentar</span></span>
<span id="cb82-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb82-3"></a><span class="co"># o segundo argumento eh onde encontramos os dados para aumentar o primeiro conjunto de dados com</span></span>
<span id="cb82-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb82-4"></a><span class="co"># o terceiro argumento sao as variaveis que usamos para vincular um conjunto de dados ao outro (cidade eh uma variavel no airbnb, local eh uma variavel na populacao)   </span></span></code></pre></div>
<p>Confira as colunas mais relevantes do quadro de dados airbnb.merged:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb83-1"></a>airbnb.merged <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb83-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb83-2"></a><span class="st">  </span><span class="kw">select</span>(room_id, city, price, population)</span></code></pre></div>
<pre><code>##      room_id              city price population
## 1    5141135              Gent    59     231493
## 2   13128333           Brussel    53         NA
## 3    8298885           Brussel    46         NA
## 4   13822088          Oostende    56         NA
## 5   18324301           Brussel    47         NA
## 6   12664969           Brussel    60         NA
## 7   15452889              Gent    41     231493
## 8    3911778           Brussel    36         NA
## 9   14929414          Verviers    18      52824
## 10   8497852           Brussel    38         NA
## 11  19372053           Tournai    14      67721
## 12  19855549           Brussel    37         NA
## 13   6772358              Gent    28     231493
## 14  13852832             Arlon   177      26179
## 15  11581251          Kortrijk   147      73879
## 16   3645177         Antwerpen   177     459805
## 17  12032748          Verviers   129      52824
## 18  12034268          Verviers   140      52824
## 19    427739              Gent   141     231493
## 20  14194882           Brussel   136         NA
## 21  19298546            Leuven   132      92892
## 22  12133666            Brugge   117     116709
## 23   4419833               Ath   106      26681
## 24  15573750            Leuven   116      92892
## 25   1334575          Tongeren   106      29816
## 26   5080373            Leuven   117      92892
## 27  18792208           Brussel    95         NA
## 28  12953046          Turnhout    95      39654
## 29  19240451           Brussel    89         NA
## 30  18127715           Brussel    90         NA
## 31   2819790         Antwerpen    99     459805
## 32  13359912            Brugge    95     116709
## 33  19011766            Dinant    89         NA
## 34  18400286          Nivelles   100      24149
## 35   6618531          Tongeren    79      29816
## 36   5295379           Brussel    70         NA
## 37    305254           Brussel    65         NA
## 38  17101078           Brussel    68         NA
## 39   6922628         Antwerpen    71     459805
## 40   6071151            Leuven    82      92892
## 41    776659          Verviers    70      52824
## 42   7264367         Antwerpen    71     459805
## 43   9872230         Antwerpen    71     459805
## 44   9374612           Brussel    82         NA
## 45  16487370          Mechelen    64      77530
## 46  14904339             Namur    64     106284
## 47  10134272           Brussel    82         NA
## 48   5369431           Brussel    47         NA
## 49  14269765           Brussel    46         NA
## 50   9428708            LiÃ¨ge    47         NA
## 51  18412932           Brussel    47         NA
## 52  15867878          Oostende    59         NA
## 53   8669953   Halle-Vilvoorde    53         NA
## 54   6137734          Mechelen    59      77530
## 55  13917474            LiÃ¨ge    53         NA
## 56  15325813              Gent    42     231493
## 57  18855915            Virton    53         NA
## 58  19257027          Turnhout    47      39654
## 59  11984885           Brussel    47         NA
## 60   7982955           Brussel    53         NA
## 61   2289786         Antwerpen    41     459805
## 62  17822696          Verviers    44      52824
## 63  19644516          Mechelen    58      77530
## 64   2403914         Antwerpen    47     459805
## 65   3503685           Brussel    53         NA
## 66   1334717          Tongeren    47      29816
## 67   7479719          Mechelen    41      77530
## 68   5609860          Nivelles    44      24149
## 69  17306887              Mons    43      91277
## 70   8422305          Oostende    41         NA
## 71  19539445           Brussel    59         NA
## 72  11683593           Brussel    47         NA
## 73  19267790           Brussel    47         NA
## 74  13870594         Antwerpen    53     459805
## 75  17991836          Mechelen    59      77530
## 76  15563196           Brussel    30         NA
## 77  15138720           Brussel    34         NA
## 78  14481075           Brussel    18         NA
## 79  15453651           Brussel    30         NA
## 80   6504321           Brussel    30         NA
## 81   8209254   Halle-Vilvoorde    41         NA
## 82  16453691          Verviers    11      52824
## 83  16307457          Tongeren    35      29816
## 84  16626065           Brussel    35         NA
## 85  14264551           Brussel    26         NA
## 86  13879762          Soignies    22      24869
## 87  12424835           Brussel    40         NA
## 88  12032916              Gent    23     231493
## 89  12101635            Leuven    39      92892
## 90  10625332           Brussel    30         NA
## 91  12424357           Brussel    40         NA
## 92   3710876         Antwerpen    35     459805
## 93  10128019         Antwerpen    31     459805
## 94   7186272           Brussel    24         NA
## 95  19242190             Aalst    11      77534
## 96  17128648          Verviers    18      52824
## 97  10079396           Brussel    26         NA
## 98  16775210           Brussel    23         NA
## 99  19794790           Brussel    23         NA
## 100 15459733           Brussel    19         NA
## 101  2533747           Brussel    39         NA
## 102 16486024           Brussel    19         NA
## 103 19082765           Brussel    19         NA
## 104 13838407           Brussel    26         NA
## 105 15459583           Brussel    19         NA
## 106 18365341        Oudenaarde    24      27935
## 107 18303344           Brussel    22         NA
## 108 13856670           Brussel    24         NA
## 109 13846466           Brussel    30         NA
## 110  5208612           Brussel   125         NA
## 111  5867005           Brussel   136         NA
## 112 16234918           Brussel   133         NA
## 113   627461           Brussel   115         NA
## 114  4029308             Arlon   106      26179
## 115  4964759           Brussel   105         NA
## 116 19886292   Halle-Vilvoorde   124         NA
## 117 15651530           Brussel    89         NA
## 118 12282191            Veurne    82         NA
## 119  9482000          Oostende   100         NA
## 120 18669717             Arlon    65      26179
## 121  6618877           Brussel    70         NA
## 122 18848502           Brussel    76         NA
## 123  7508044           Brussel    59         NA
## 124 19868373              Gent    62     231493
## 125 13384698           Brussel    59         NA
## 126  9044335           Brussel    47         NA
## 127 14314490           Brussel    59         NA
## 128 13061326           Brussel    49         NA
## 129 13052188           Brussel    59         NA
## 130  7997565           Brussel    59         NA
## 131 17116772           Brussel    49         NA
## 132  7799636           Brussel  1120         NA
## 133  8288800             Namur  1061     106284
## 134 14400013      NeufchÃ¢teau   872         NA
## 135 17081519           Waremme   866         NA
## 136  5634567            LiÃ¨ge   825         NA
## 137  7805577          Verviers   884      52824
## 138  7165868           Brussel  1002         NA
## 139 10274258          Verviers  1002      52824
## 140  8122542      NeufchÃ¢teau   814         NA
## 141 17862238          Verviers   630      52824
## 142  8638355            Brugge   530     116709
## 143 14361938          Verviers   708      52824
## 144  6584668         Antwerpen   531     459805
## 145 12659483          Verviers   530      52824
## 146  1133543            Dinant   589         NA
## 147  9289185           Brussel   708         NA
## 148  5268112          Kortrijk   530      73879
## 149 16511250          Verviers   708      52824
## 150 18055247         Antwerpen   589     459805
## 151  4125959          Verviers   613      52824
## 152 19832075         Antwerpen   589     459805
## 153  9895516          Verviers   589      52824
## 154 11311977        Oudenaarde   588      27935
## 155 19767542         Antwerpen   589     459805
## 156  2001980             Ieper   648      35089
## 157 19544556          Mechelen   565      77530
## 158 17094009             Namur   648     106284
## 159  6266731 Marche-en-Famenne   342      16856
## 160  6306984 Marche-en-Famenne   459      16856
## 161  1873941             Namur   353     106284
## 162 10505318            Brugge   353     116709
## 163  3218980            Leuven   324      92892
## 164  6622480            Brugge   383     116709
## 165 14436744          Verviers   413      52824
## 166  4643394            Dinant   388         NA
## 167  8305745          Tongeren   324      29816
## 168 14563219            Brugge   330     116709
## 169  8605552         Antwerpen   413     459805
## 170  9768597            Brugge   413     116709
## 171 10982966            Dinant   401         NA
## 172 13890965      Sint-Niklaas   483      69010
## 173  9485806      NeufchÃ¢teau   211         NA
## 174 14139756            Dinant   260         NA
## 175  8677551      NeufchÃ¢teau   227         NA
## 176  5062155 Marche-en-Famenne   272      16856
## 177  7631501      NeufchÃ¢teau   212         NA
## 178 11965718             Ieper   236      35089
## 179  2873179           Brussel   271         NA
## 180  8081545           Brussel   236         NA
## 181  2200868            Brugge   235     116709
## 182 18670282            Brugge   236     116709
## 183  6431470            Brugge   218     116709
## 184  9856241            Brugge   260     116709
## 185  3320199           Brussel   236         NA
## 186  9177354           Brussel   224         NA
## 187  7574537 Marche-en-Famenne   247      16856
## 188  4053396           Brussel    76         NA
## 189 10790061         Antwerpen    68     459805
## 190  9871590         Antwerpen    78     459805
## 191  3879691            Brugge    76     116709
## 192 18496589         Antwerpen    77     459805
## 193 12567023           Brussel   265         NA
## 194  5158233            Dinant   236         NA
## 195 10045822            Brugge   236     116709
## 196  7570229 Marche-en-Famenne   212      16856
## 197 19875796         Antwerpen   271     459805
## 198 19799071           Brussel   212         NA
## 199 14213309         Antwerpen   230     459805
## 200 19880328   Halle-Vilvoorde   265         NA
## 201  2643209           Brussel   201         NA
## 202 19420094            Veurne   201         NA
## 203 19357024            Veurne   188         NA
## 204  5456149          Oostende   201         NA
## 205 14027383            LiÃ¨ge   188         NA
## 206  1457964           Brussel   188         NA
## 207  8177441          Verviers   203      52824
## 208  6653065          Nivelles   206      24149
## 209 15322863              Gent   141     231493
## 210 14414584            Veurne   130         NA
## 211 19869653         Moeskroen   141         NA
## 212 14313831            Brugge   133     116709
## 213  6420828          Verviers   140      52824
## 214 14663508          Verviers   141      52824
## 215  4234316            Brugge   141     116709
## 216 11753766            Dinant   136         NA
## 217 19841063         Antwerpen   136     459805
## 218  5752406      NeufchÃ¢teau   117         NA
## 219  7225096            LiÃ¨ge   116         NA
## 220  4460348             Arlon   106      26179
## 221 18176029             Arlon   106      26179
## 222  4595400              Gent   111     231493
## 223  9527419            Veurne   123         NA
## 224  2855704              Gent   106     231493
## 225  9438769            LiÃ¨ge   112         NA
## 226 19586893          Verviers   116      52824
## 227 19873275          Soignies   106      24869
## 228 19867106           Brussel   117         NA
## 229  9687262           Brussel   116         NA
## 230 19887471           Brussel   106         NA
## 231 18958135           Maaseik   112      23684
## 232 19882564           Brussel   117         NA
## 233 16485966           Brussel    19         NA
## 234 15513008           Brussel    19         NA
## 235 19101520           Brussel    18         NA
## 236 15542284           Brussel    19         NA
## 237 16688487   Halle-Vilvoorde    30         NA
## 238 18985088           Brussel    19         NA
## 239  8906556           Brussel    26         NA
## 240 11278553            Virton    30         NA
## 241  5866814             Namur    27     106284
## 242 19782106           Brussel    24         NA
## 243 10571855           Brussel    18         NA
## 244  6894473            Brugge    28     116709
## 245 19423405           Brussel    24         NA
## 246  2820108         Antwerpen    35     459805
## 247  5813507            Leuven    28      92892
## 248 15176439            LiÃ¨ge    24         NA
## 249 19685432           Brussel    30         NA
## 250 19082608           Brussel    19         NA
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 17401 rows ]</code></pre>
<p>Vemos que há uma population de colunas em nosso conjunto de dados airbnb.merged. Você também pode ver isso no painel Ambiente: airbnb.merged tem uma variável a mais que airbnb (mas o mesmo número de observações).</p>
<p>Faltam dados para Bruxelas, no entanto. Isso ocorre porque Bruxelas está escrito em holandês no conjunto de dados airbnb, mas em inglês no conjunto de dados da population.</p>
<p>Vamos substituir Bruxelas por Bruxelas no conjunto de dados da population (e também alterar a ortografia de duas outras cidades) e vincular os dados novamente:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb85-1"></a>population &lt;-<span class="st"> </span>population <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb85-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb85-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">place =</span> <span class="kw">replace</span>(place, place <span class="op">==</span><span class="st"> &quot;Brussels&quot;</span>, <span class="st">&quot;Brussel&quot;</span>),</span>
<span id="cb85-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb85-3"></a>         <span class="dt">place =</span> <span class="kw">replace</span>(place, place <span class="op">==</span><span class="st"> &quot;Ostend&quot;</span>, <span class="st">&quot;Oostende&quot;</span>),</span>
<span id="cb85-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb85-4"></a>         <span class="dt">place =</span> <span class="kw">replace</span>(place, place <span class="op">==</span><span class="st"> &quot;Mouscron&quot;</span>, <span class="st">&quot;Moeskroen&quot;</span>))</span>
<span id="cb85-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb85-5"></a></span>
<span id="cb85-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb85-6"></a>airbnb.merged &lt;-<span class="st"> </span><span class="kw">left_join</span>(airbnb, population, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;city&quot;</span> =<span class="st"> &quot;place&quot;</span>))</span>
<span id="cb85-7"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb85-7"></a></span>
<span id="cb85-8"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb85-8"></a>airbnb.merged <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb85-9"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb85-9"></a><span class="st">  </span><span class="kw">select</span>(room_id, city, price, population)</span></code></pre></div>
<pre><code>##      room_id              city price population
## 1    5141135              Gent    59     231493
## 2   13128333           Brussel    53    1019022
## 3    8298885           Brussel    46    1019022
## 4   13822088          Oostende    56      69011
## 5   18324301           Brussel    47    1019022
## 6   12664969           Brussel    60    1019022
## 7   15452889              Gent    41     231493
## 8    3911778           Brussel    36    1019022
## 9   14929414          Verviers    18      52824
## 10   8497852           Brussel    38    1019022
## 11  19372053           Tournai    14      67721
## 12  19855549           Brussel    37    1019022
## 13   6772358              Gent    28     231493
## 14  13852832             Arlon   177      26179
## 15  11581251          Kortrijk   147      73879
## 16   3645177         Antwerpen   177     459805
## 17  12032748          Verviers   129      52824
## 18  12034268          Verviers   140      52824
## 19    427739              Gent   141     231493
## 20  14194882           Brussel   136    1019022
## 21  19298546            Leuven   132      92892
## 22  12133666            Brugge   117     116709
## 23   4419833               Ath   106      26681
## 24  15573750            Leuven   116      92892
## 25   1334575          Tongeren   106      29816
## 26   5080373            Leuven   117      92892
## 27  18792208           Brussel    95    1019022
## 28  12953046          Turnhout    95      39654
## 29  19240451           Brussel    89    1019022
## 30  18127715           Brussel    90    1019022
## 31   2819790         Antwerpen    99     459805
## 32  13359912            Brugge    95     116709
## 33  19011766            Dinant    89         NA
## 34  18400286          Nivelles   100      24149
## 35   6618531          Tongeren    79      29816
## 36   5295379           Brussel    70    1019022
## 37    305254           Brussel    65    1019022
## 38  17101078           Brussel    68    1019022
## 39   6922628         Antwerpen    71     459805
## 40   6071151            Leuven    82      92892
## 41    776659          Verviers    70      52824
## 42   7264367         Antwerpen    71     459805
## 43   9872230         Antwerpen    71     459805
## 44   9374612           Brussel    82    1019022
## 45  16487370          Mechelen    64      77530
## 46  14904339             Namur    64     106284
## 47  10134272           Brussel    82    1019022
## 48   5369431           Brussel    47    1019022
## 49  14269765           Brussel    46    1019022
## 50   9428708            LiÃ¨ge    47         NA
## 51  18412932           Brussel    47    1019022
## 52  15867878          Oostende    59      69011
## 53   8669953   Halle-Vilvoorde    53         NA
## 54   6137734          Mechelen    59      77530
## 55  13917474            LiÃ¨ge    53         NA
## 56  15325813              Gent    42     231493
## 57  18855915            Virton    53         NA
## 58  19257027          Turnhout    47      39654
## 59  11984885           Brussel    47    1019022
## 60   7982955           Brussel    53    1019022
## 61   2289786         Antwerpen    41     459805
## 62  17822696          Verviers    44      52824
## 63  19644516          Mechelen    58      77530
## 64   2403914         Antwerpen    47     459805
## 65   3503685           Brussel    53    1019022
## 66   1334717          Tongeren    47      29816
## 67   7479719          Mechelen    41      77530
## 68   5609860          Nivelles    44      24149
## 69  17306887              Mons    43      91277
## 70   8422305          Oostende    41      69011
## 71  19539445           Brussel    59    1019022
## 72  11683593           Brussel    47    1019022
## 73  19267790           Brussel    47    1019022
## 74  13870594         Antwerpen    53     459805
## 75  17991836          Mechelen    59      77530
## 76  15563196           Brussel    30    1019022
## 77  15138720           Brussel    34    1019022
## 78  14481075           Brussel    18    1019022
## 79  15453651           Brussel    30    1019022
## 80   6504321           Brussel    30    1019022
## 81   8209254   Halle-Vilvoorde    41         NA
## 82  16453691          Verviers    11      52824
## 83  16307457          Tongeren    35      29816
## 84  16626065           Brussel    35    1019022
## 85  14264551           Brussel    26    1019022
## 86  13879762          Soignies    22      24869
## 87  12424835           Brussel    40    1019022
## 88  12032916              Gent    23     231493
## 89  12101635            Leuven    39      92892
## 90  10625332           Brussel    30    1019022
## 91  12424357           Brussel    40    1019022
## 92   3710876         Antwerpen    35     459805
## 93  10128019         Antwerpen    31     459805
## 94   7186272           Brussel    24    1019022
## 95  19242190             Aalst    11      77534
## 96  17128648          Verviers    18      52824
## 97  10079396           Brussel    26    1019022
## 98  16775210           Brussel    23    1019022
## 99  19794790           Brussel    23    1019022
## 100 15459733           Brussel    19    1019022
## 101  2533747           Brussel    39    1019022
## 102 16486024           Brussel    19    1019022
## 103 19082765           Brussel    19    1019022
## 104 13838407           Brussel    26    1019022
## 105 15459583           Brussel    19    1019022
## 106 18365341        Oudenaarde    24      27935
## 107 18303344           Brussel    22    1019022
## 108 13856670           Brussel    24    1019022
## 109 13846466           Brussel    30    1019022
## 110  5208612           Brussel   125    1019022
## 111  5867005           Brussel   136    1019022
## 112 16234918           Brussel   133    1019022
## 113   627461           Brussel   115    1019022
## 114  4029308             Arlon   106      26179
## 115  4964759           Brussel   105    1019022
## 116 19886292   Halle-Vilvoorde   124         NA
## 117 15651530           Brussel    89    1019022
## 118 12282191            Veurne    82         NA
## 119  9482000          Oostende   100      69011
## 120 18669717             Arlon    65      26179
## 121  6618877           Brussel    70    1019022
## 122 18848502           Brussel    76    1019022
## 123  7508044           Brussel    59    1019022
## 124 19868373              Gent    62     231493
## 125 13384698           Brussel    59    1019022
## 126  9044335           Brussel    47    1019022
## 127 14314490           Brussel    59    1019022
## 128 13061326           Brussel    49    1019022
## 129 13052188           Brussel    59    1019022
## 130  7997565           Brussel    59    1019022
## 131 17116772           Brussel    49    1019022
## 132  7799636           Brussel  1120    1019022
## 133  8288800             Namur  1061     106284
## 134 14400013      NeufchÃ¢teau   872         NA
## 135 17081519           Waremme   866         NA
## 136  5634567            LiÃ¨ge   825         NA
## 137  7805577          Verviers   884      52824
## 138  7165868           Brussel  1002    1019022
## 139 10274258          Verviers  1002      52824
## 140  8122542      NeufchÃ¢teau   814         NA
## 141 17862238          Verviers   630      52824
## 142  8638355            Brugge   530     116709
## 143 14361938          Verviers   708      52824
## 144  6584668         Antwerpen   531     459805
## 145 12659483          Verviers   530      52824
## 146  1133543            Dinant   589         NA
## 147  9289185           Brussel   708    1019022
## 148  5268112          Kortrijk   530      73879
## 149 16511250          Verviers   708      52824
## 150 18055247         Antwerpen   589     459805
## 151  4125959          Verviers   613      52824
## 152 19832075         Antwerpen   589     459805
## 153  9895516          Verviers   589      52824
## 154 11311977        Oudenaarde   588      27935
## 155 19767542         Antwerpen   589     459805
## 156  2001980             Ieper   648      35089
## 157 19544556          Mechelen   565      77530
## 158 17094009             Namur   648     106284
## 159  6266731 Marche-en-Famenne   342      16856
## 160  6306984 Marche-en-Famenne   459      16856
## 161  1873941             Namur   353     106284
## 162 10505318            Brugge   353     116709
## 163  3218980            Leuven   324      92892
## 164  6622480            Brugge   383     116709
## 165 14436744          Verviers   413      52824
## 166  4643394            Dinant   388         NA
## 167  8305745          Tongeren   324      29816
## 168 14563219            Brugge   330     116709
## 169  8605552         Antwerpen   413     459805
## 170  9768597            Brugge   413     116709
## 171 10982966            Dinant   401         NA
## 172 13890965      Sint-Niklaas   483      69010
## 173  9485806      NeufchÃ¢teau   211         NA
## 174 14139756            Dinant   260         NA
## 175  8677551      NeufchÃ¢teau   227         NA
## 176  5062155 Marche-en-Famenne   272      16856
## 177  7631501      NeufchÃ¢teau   212         NA
## 178 11965718             Ieper   236      35089
## 179  2873179           Brussel   271    1019022
## 180  8081545           Brussel   236    1019022
## 181  2200868            Brugge   235     116709
## 182 18670282            Brugge   236     116709
## 183  6431470            Brugge   218     116709
## 184  9856241            Brugge   260     116709
## 185  3320199           Brussel   236    1019022
## 186  9177354           Brussel   224    1019022
## 187  7574537 Marche-en-Famenne   247      16856
## 188  4053396           Brussel    76    1019022
## 189 10790061         Antwerpen    68     459805
## 190  9871590         Antwerpen    78     459805
## 191  3879691            Brugge    76     116709
## 192 18496589         Antwerpen    77     459805
## 193 12567023           Brussel   265    1019022
## 194  5158233            Dinant   236         NA
## 195 10045822            Brugge   236     116709
## 196  7570229 Marche-en-Famenne   212      16856
## 197 19875796         Antwerpen   271     459805
## 198 19799071           Brussel   212    1019022
## 199 14213309         Antwerpen   230     459805
## 200 19880328   Halle-Vilvoorde   265         NA
## 201  2643209           Brussel   201    1019022
## 202 19420094            Veurne   201         NA
## 203 19357024            Veurne   188         NA
## 204  5456149          Oostende   201      69011
## 205 14027383            LiÃ¨ge   188         NA
## 206  1457964           Brussel   188    1019022
## 207  8177441          Verviers   203      52824
## 208  6653065          Nivelles   206      24149
## 209 15322863              Gent   141     231493
## 210 14414584            Veurne   130         NA
## 211 19869653         Moeskroen   141      52069
## 212 14313831            Brugge   133     116709
## 213  6420828          Verviers   140      52824
## 214 14663508          Verviers   141      52824
## 215  4234316            Brugge   141     116709
## 216 11753766            Dinant   136         NA
## 217 19841063         Antwerpen   136     459805
## 218  5752406      NeufchÃ¢teau   117         NA
## 219  7225096            LiÃ¨ge   116         NA
## 220  4460348             Arlon   106      26179
## 221 18176029             Arlon   106      26179
## 222  4595400              Gent   111     231493
## 223  9527419            Veurne   123         NA
## 224  2855704              Gent   106     231493
## 225  9438769            LiÃ¨ge   112         NA
## 226 19586893          Verviers   116      52824
## 227 19873275          Soignies   106      24869
## 228 19867106           Brussel   117    1019022
## 229  9687262           Brussel   116    1019022
## 230 19887471           Brussel   106    1019022
## 231 18958135           Maaseik   112      23684
## 232 19882564           Brussel   117    1019022
## 233 16485966           Brussel    19    1019022
## 234 15513008           Brussel    19    1019022
## 235 19101520           Brussel    18    1019022
## 236 15542284           Brussel    19    1019022
## 237 16688487   Halle-Vilvoorde    30         NA
## 238 18985088           Brussel    19    1019022
## 239  8906556           Brussel    26    1019022
## 240 11278553            Virton    30         NA
## 241  5866814             Namur    27     106284
## 242 19782106           Brussel    24    1019022
## 243 10571855           Brussel    18    1019022
## 244  6894473            Brugge    28     116709
## 245 19423405           Brussel    24    1019022
## 246  2820108         Antwerpen    35     459805
## 247  5813507            Leuven    28      92892
## 248 15176439            LiÃ¨ge    24         NA
## 249 19685432           Brussel    30    1019022
## 250 19082608           Brussel    19    1019022
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 17401 rows ]</code></pre>
</div>
<div id="recapitulando-importação-e-manipulação" class="section level3 unlisted unnumbered">
<h3>Recapitulando: importação e manipulação</h3>
<p>Aqui está o que fizemos até agora, em uma sequência ordenada de operações pipe (faça o download dos dados <a href="http://users.telenet.be/samuelfranssens/tutorial_data/tomslee_airbnb_belgium_1454_2017-07-14.csv">aqui</a> e <a href="http://users.telenet.be/samuelfranssens/tutorial_data/population.xlsx">aqui</a>:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-1"></a><span class="co">#library(tidyverse)</span></span>
<span id="cb87-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-2"></a><span class="co">#setwd(&quot;c:/Dropbox/work/teaching/R&quot;) # Configura seu diretorio de trabalho</span></span>
<span id="cb87-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-3"></a></span>
<span id="cb87-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-4"></a><span class="co">#airbnb &lt;- read_csv(&quot;tomslee_airbnb_belgium_1454_2017-07-14.csv&quot;) %&gt;% </span></span>
<span id="cb87-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-5"></a>  <span class="co">#mutate(room_id = factor(room_id), host_id = factor(host_id),</span></span>
<span id="cb87-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-6"></a>   <span class="co">#      overall_satisfaction = replace(overall_satisfaction, overall_satisfaction == 0, NA)) %&gt;% </span></span>
<span id="cb87-7"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-7"></a><span class="co">#  select(-country, -survey_id,- bathrooms, -minstay, -location, -last_modified) %&gt;% </span></span>
<span id="cb87-8"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-8"></a><span class="co">#  rename(country = city, city = borough) </span></span>
<span id="cb87-9"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-9"></a></span>
<span id="cb87-10"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-10"></a><span class="co">#population &lt;- read_excel(&quot;population.xlsx&quot;,&quot;data&quot;) %&gt;% </span></span>
<span id="cb87-11"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-11"></a>  <span class="co">#mutate(place = replace(place, place == &quot;Brussels&quot;, &quot;Brussel&quot;),</span></span>
<span id="cb87-12"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-12"></a>        <span class="co"># place = replace(place, place == &quot;Ostend&quot;, &quot;Oostende&quot;),</span></span>
<span id="cb87-13"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-13"></a>        <span class="co"># place = replace(place, place == &quot;Mouscron&quot;, &quot;Moeskroen&quot;))</span></span>
<span id="cb87-14"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-14"></a></span>
<span id="cb87-15"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb87-15"></a><span class="co">#airbnb &lt;- left_join(airbnb, population, by = c(&quot;city&quot; = &quot;place&quot;))</span></span></code></pre></div>
</div>
<div id="amostras-independentes-teste-t" class="section level3 unlisted unnumbered">
<h3>Amostras independentes: teste <span class="math inline">\(t\)</span></h3>
<p>Digamos que queremos testar se os preços diferem entre cidades grandes e pequenas. Para fazer isso, precisamos de uma variável que indique se um Airbnb está em uma cidade grande ou pequena. Na Bélgica, consideramos cidades com uma população de pelo menos cem mil como grande:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb88-1"></a>airbnb &lt;-<span class="st"> </span>airbnb.merged <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb88-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb88-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">large =</span> population <span class="op">&gt;</span><span class="st"> </span><span class="dv">100000</span>,</span>
<span id="cb88-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb88-3"></a>        <span class="dt">size =</span> <span class="kw">factor</span>(large, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;small&quot;</span>,<span class="st">&quot;large&quot;</span>)))</span>
<span id="cb88-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb88-4"></a></span>
<span id="cb88-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb88-5"></a><span class="co"># Nos poderiamos tambem ter escrito: mutate(size = factor(population &gt; 100000, labels = c(&quot;small&quot;,&quot;large)))</span></span>
<span id="cb88-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb88-6"></a></span>
<span id="cb88-7"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb88-7"></a><span class="co"># observando a variavel populacao</span></span>
<span id="cb88-8"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb88-8"></a><span class="kw">head</span>(airbnb<span class="op">$</span>population)</span></code></pre></div>
<pre><code>## [1]  231493 1019022 1019022   69011 1019022 1019022</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb90-1"></a><span class="co"># olhando a maior variavel</span></span>
<span id="cb90-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb90-2"></a><span class="kw">head</span>(airbnb<span class="op">$</span>large)</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb92-1"></a><span class="co"># e o tamanho da variavel</span></span>
<span id="cb92-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb92-2"></a><span class="kw">head</span>(airbnb<span class="op">$</span>size)</span></code></pre></div>
<pre><code>## [1] large large large small large large
## Levels: small large</code></pre>
<p>No script acima, primeiro criamos uma variável lógica (esse é outro tipo de variável; discutimos outras aqui). Chamamos essa variável de grande e é TRUE quando a população é maior que 100000 e FALSE, se não. Depois, criamos um novo tamanho de variável que é a fatoração de grande porte. Observe que adicionamos outro argumento à função factor, ou seja, labels, para fornecer os valores large de nomes mais intuitivos. FALSE vem em primeiro lugar no alfabeto e obtém o primeiro rótulo pequeno, TRUE fica em segundo lugar no alfabeto e obtém o segundo rótulo grande.</p>
<p>Para saber quais cidades são grandes e quais são pequenas, podemos solicitar frequências de combinações de tamanho (grande versus pequeno) e city (a própria cidade). Aprendemos como fazer isso no capítulo introdutório (consulte as tabelas de frequência e as estatísticas descritivas):</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb94-1"></a>airbnb <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb94-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb94-2"></a><span class="st">  </span><span class="kw">group_by</span>(size, city) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb94-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb94-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">n</span>(), </span>
<span id="cb94-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb94-4"></a>            <span class="dt">population =</span> <span class="kw">mean</span>(population)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Cidades formam os grupos. Portanto, a populacao media de um grupo = a media de observacoes com a mesma populacao, porque elas vem da mesma cidade = a populacao da cidade</span></span>
<span id="cb94-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb94-5"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(size), <span class="kw">desc</span>(population)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># maior cidade no topo</span></span>
<span id="cb94-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb94-6"></a><span class="st">  </span><span class="kw">print</span> (<span class="dt">n =</span> <span class="ot">Inf</span>) <span class="co"># mostra a distribuicao completa das frequencias</span></span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;size&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 43 x 4
## # Groups:   size [3]
##    size  city              count population
##    &lt;fct&gt; &lt;chr&gt;             &lt;int&gt;      &lt;dbl&gt;
##  1 large Brussel            6715    1019022
##  2 large Antwerpen          1610     459805
##  3 large Gent               1206     231493
##  4 large Charleroi           118     200132
##  5 large Brugge             1094     116709
##  6 large Namur               286     106284
##  7 small Leuven              434      92892
##  8 small Mons                129      91277
##  9 small Aalst                74      77534
## 10 small Mechelen            190      77530
## 11 small Kortrijk            107      73879
## 12 small Hasselt             151      69222
## 13 small Oostende            527      69011
## 14 small Sint-Niklaas         52      69010
## 15 small Tournai              97      67721
## 16 small Roeselare            41      56016
## 17 small Verviers            631      52824
## 18 small Moeskroen            28      52069
## 19 small Dendermonde          45      43055
## 20 small Turnhout            130      39654
## 21 small Ieper               143      35089
## 22 small Tongeren            173      29816
## 23 small Oudenaarde          110      27935
## 24 small Ath                  47      26681
## 25 small Arlon                46      26179
## 26 small Soignies             58      24869
## 27 small Nivelles            505      24149
## 28 small Maaseik              93      23684
## 29 small Huy                  99      19973
## 30 small Tielt                24      19299
## 31 small Eeklo                43      19116
## 32 small Marche-en-Famenne   266      16856
## 33 small Diksmuide            27      15515
## 34 &lt;NA&gt;  Bastogne            145         NA
## 35 &lt;NA&gt;  Dinant              286         NA
## 36 &lt;NA&gt;  Halle-Vilvoorde     471         NA
## 37 &lt;NA&gt;  LiÃ¨ge              667         NA
## 38 &lt;NA&gt;  NeufchÃ¢teau        160         NA
## 39 &lt;NA&gt;  Philippeville        85         NA
## 40 &lt;NA&gt;  Thuin                81         NA
## 41 &lt;NA&gt;  Veurne              350         NA
## 42 &lt;NA&gt;  Virton               56         NA
## 43 &lt;NA&gt;  Waremme              51         NA</code></pre>
<p>Vemos que algumas cidades têm um valor de NA para tamanho. Isso ocorre porque não temos população para essas cidades (e, portanto, também não sabemos se é uma cidade grande ou pequena). Vamos filtrar essas observações e verificar as médias e os desvios padrão de preço, dependendo do tamanho da cidade:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-1"></a>airbnb.cities &lt;-<span class="st"> </span>airbnb <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb97-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(population)) </span>
<span id="cb97-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-3"></a><span class="co"># Filtre as observacoes para as quais nao temos a populacao.</span></span>
<span id="cb97-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-4"></a><span class="co"># O ponto de exclamacao deve ser lido como NAO. Entao, queremos manter as observacoes para as quais a populacao NAO eh NA.</span></span>
<span id="cb97-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-5"></a><span class="co"># Visite https://r4ds.had.co.nz/transform.html#filter-rows-with-filter para conhecer mais sobre operadores logicos (veja secao 5.2.2).</span></span>
<span id="cb97-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-6"></a></span>
<span id="cb97-7"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-7"></a>airbnb.cities <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb97-8"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-8"></a><span class="st">  </span><span class="kw">group_by</span>(size) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb97-9"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-9"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_price =</span> <span class="kw">mean</span>(price),</span>
<span id="cb97-10"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-10"></a>            <span class="dt">sd_price =</span> <span class="kw">sd</span>(price),</span>
<span id="cb97-11"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb97-11"></a>            <span class="dt">count =</span> <span class="kw">n</span>())</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 2 x 4
##   size  mean_price sd_price count
##   &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
## 1 small      110.     122.   4270
## 2 large       85.8     82.9 11029</code></pre>
<p>Vemos que os preços são mais altos nas pequenas e nas grandes cidades, mas queremos saber se essa diferença é significativa. Um teste t de amostras independentes pode fornecer a resposta (as listagens nas grandes cidades e as listagens nas pequenas cidades são as amostras independentes), mas precisamos verificar primeiro uma suposição: as variâncias das duas amostras independentes são iguais?</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb100-1"></a><span class="co">#install.packages(car) # Para o teste de igualdade de variancias precisaremos do pacote car.</span></span>
<span id="cb100-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb100-2"></a><span class="kw">library</span>(car)</span>
<span id="cb100-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb100-3"></a></span>
<span id="cb100-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb100-4"></a><span class="co"># Teste de Levene para variancias iguais </span></span>
<span id="cb100-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb100-5"></a><span class="co"># Baixo valor p significa que as variancias nao sao iguais. </span></span>
<span id="cb100-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb100-6"></a><span class="co"># Primeiro argumento = variavel dependente continua, segundo argumento = variavel independente categorica.</span></span>
<span id="cb100-7"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb100-7"></a></span>
<span id="cb100-8"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb100-8"></a><span class="kw">leveneTest</span>(airbnb.cities<span class="op">$</span>price, airbnb.cities<span class="op">$</span>size) </span></code></pre></div>
<pre><code>## Levene&#39;s Test for Homogeneity of Variance (center = median)
##          Df F value    Pr(&gt;F)    
## group     1  134.45 &lt; 2.2e-16 ***
##       15297                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>A hipótese nula de variâncias iguais é rejeitada (<span class="math inline">\(p &lt;0,001\)</span>), portanto, devemos continuar com um teste <span class="math inline">\(t\)</span> que pressupõe variâncias desiguais:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb102-1"></a><span class="co"># Teste se os preços médios das cidades grandes e pequenas são diferentes.</span></span>
<span id="cb102-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb102-2"></a><span class="co"># Indique se o teste deve assumir variações iguais ou não (defina var.equal = TRUE para um teste que assume variações iguais).</span></span>
<span id="cb102-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb102-3"></a></span>
<span id="cb102-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb102-4"></a><span class="kw">t.test</span>(airbnb.cities<span class="op">$</span>price <span class="op">~</span><span class="st"> </span>airbnb.cities<span class="op">$</span>size, <span class="dt">var.equal =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## 
## 	Welch Two Sample t-test
## 
## data:  airbnb.cities$price by airbnb.cities$size
## t = 12.125, df = 5868.3, p-value &lt; 2.2e-16
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  20.55103 28.47774
## sample estimates:
## mean in group small mean in group large 
##           110.31265            85.79826</code></pre>
<p>Você pode relatar o seguinte: “As cidades grandes (M = 85,42, DP = 82,46) tinham um preço mais baixo (<span class="math inline">\(t\)</span> (5762,79) = 12,376, p $&lt;$0,001, variação desigual assumida) do que as cidades pequenas (M = 110,31, DP = 121,63).”</p>
</div>
<div id="anova-univariada" class="section level3 unlisted unnumbered">
<h3>ANOVA univariada</h3>
<p>Quando sua variável independente (categórica) possui apenas dois grupos, é possível testar se as médias da variável dependente (contínua) são significativamente diferentes ou não com um teste <span class="math inline">\(t\)</span>. Quando sua variável independente possui mais de dois grupos, você pode testar se as médias são diferentes com uma ANOVA.</p>
<p>Por exemplo, digamos que queremos testar se há uma diferença significativa entre os preços médios de casas e apartamentos inteiros, salas privadas e quartos compartilhados. Vamos dar uma olhada nos meios por tipo de quarto:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb104-1"></a>airbnb.summary &lt;-<span class="st"> </span>airbnb <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb104-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb104-2"></a><span class="st">  </span><span class="kw">group_by</span>(room_type) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb104-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb104-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">n</span>(), <span class="co"># obtenha as frequencias dos diferentes tipos de quartos </span></span>
<span id="cb104-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb104-4"></a>            <span class="dt">mean_price =</span> <span class="kw">mean</span>(price), <span class="co"># o preco medio por tipo de quarto</span></span>
<span id="cb104-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb104-5"></a>            <span class="dt">sd_price =</span> <span class="kw">sd</span>(price)) <span class="co"># e o desvio padrao do preco por tipo de quarto</span></span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb106-1"></a>airbnb.summary</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   room_type       count mean_price sd_price
##   &lt;chr&gt;           &lt;int&gt;      &lt;dbl&gt;    &lt;dbl&gt;
## 1 Entire home/apt 11082      113.     118. 
## 2 Private room     6416       64.3     46.5
## 3 Shared room       153       49.6     33.9</code></pre>
<p>Também podemos traçar esses meios em um gráfico de barras:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb108-1"></a><span class="co"># Ao criar um grafico de barras, o conjunto de dados que serve como entrada para o ggplot eh o resumo com os meios, nao o conjunto de dados completo.</span></span>
<span id="cb108-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb108-2"></a><span class="co"># (Eh por isso que salvamos o resumo acima em um objeto airbnb.summary)</span></span>
<span id="cb108-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb108-3"></a></span>
<span id="cb108-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb108-4"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> airbnb.summary, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> room_type, <span class="dt">y =</span> mean_price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb108-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb108-5"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
<p>Não é de surpreender que casas ou apartamentos inteiros tenham preços mais altos do que quartos particulares, que, por sua vez, têm preços mais altos que quartos compartilhados. Também vemos que há quase o dobro de casas e apartamentos inteiros do que quartos privativos disponíveis e quase não há quartos compartilhados disponíveis. Além disso, o desvio padrão é muito mais alto na categoria de casas ou apartamentos inteiros do que nas categorias de quarto particular ou compartilhado.</p>
<p>Uma ANOVA pode testar se há diferenças significativas nos preços médios por tipo de quarto. Porém, antes de executar uma ANOVA, precisamos verificar se as premissas da ANOVA são atendidas.</p>
</div>
<div id="suposição-de-normalidade-de-resíduos" class="section level3 unlisted unnumbered">
<h3>Suposição de normalidade de resíduos</h3>
<p>A primeira suposição é que a variável dependente (price) é normalmente distribuída em cada nível da variável independente (room_type). Primeiro, vamos inspecionar visualmente se essa suposição será válida:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb109-1"></a><span class="co"># Ao criar um histograma, o conjunto de dados que serve como entrada para o ggplot eh o conjunto de dados completo, nao o resumo com os meios</span></span>
<span id="cb109-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb109-2"></a></span>
<span id="cb109-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb109-3"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> airbnb, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> price)) <span class="op">+</span><span class="st"> </span><span class="co"># Queremos price no eixo x.</span></span>
<span id="cb109-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb109-4"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>room_type) <span class="op">+</span><span class="st"> </span><span class="co"># Queremos que isso seja dividido por room_type.</span></span>
<span id="cb109-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb109-5"></a><span class="st">  </span><span class="co">#facet_wrap garantira que o ggplot crie paineis diferentes no seu gráfico.</span></span>
<span id="cb109-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb109-6"></a><span class="st">  </span><span class="kw">geom_histogram</span>() <span class="co"># geom_histogram garante que as frequencias dos valores no eixo X sejam plotadas.</span></span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb111-1"></a>  <span class="co">## `stat_bin()` using `bins = 30`. Pega o melhor valor com `binwidth`.</span></span></code></pre></div>
<p>Vemos que há inclinação correta para cada tipo de quarto. Também podemos testar formalmente, dentro de cada tipo de quarto, se as distribuições são normais com o teste Shapiro-Wilk. Por exemplo, para as quartos compartilhados:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb112-1"></a>airbnb.shared &lt;-<span class="st"> </span>airbnb <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb112-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb112-2"></a><span class="st">  </span><span class="kw">filter</span>(room_type <span class="op">==</span><span class="st"> &quot;Shared room&quot;</span>) <span class="co"># reter dados apenas das salas compartilhadas</span></span>
<span id="cb112-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb112-3"></a></span>
<span id="cb112-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb112-4"></a><span class="kw">shapiro.test</span>(airbnb.shared<span class="op">$</span>price)</span></code></pre></div>
<pre><code>## 
## 	Shapiro-Wilk normality test
## 
## data:  airbnb.shared$price
## W = 0.83948, p-value = 1.181e-11</code></pre>
<p>O valor-<span class="math inline">\(p\)</span> deste teste é extremamente pequeno, portanto a hipótese nula de que a amostra provém de uma distribuição normal deve ser rejeitada. Se tentarmos o teste Shapiro-Wilk para os quartos privados:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb114-1"></a>airbnb.private &lt;-<span class="st"> </span>airbnb <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb114-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb114-2"></a><span class="st">  </span><span class="kw">filter</span>(room_type <span class="op">==</span><span class="st"> &quot;Private room&quot;</span>) <span class="co"># armazenar dados apenas dos quartos compartilhados</span></span>
<span id="cb114-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb114-3"></a>  </span>
<span id="cb114-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb114-4"></a><span class="co">#shapiro.test(airbnb.private$price)</span></span>
<span id="cb114-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb114-5"></a></span>
<span id="cb114-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb114-6"></a><span class="co">## Error in shapiro.test(airbnb.private$price): sample size must be between 3 and 5000</span></span></code></pre></div>
<p>Ocorreu um erro ao dizer que o tamanho da amostra é muito grande. Para contornar esse problema, podemos tentar o teste Anderson-Darling do pacote nortest:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb115-1"></a><span class="co">#install.packages(&quot;nortest&quot;)</span></span>
<span id="cb115-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb115-2"></a><span class="kw">library</span>(nortest)</span>
<span id="cb115-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb115-3"></a><span class="kw">ad.test</span>(airbnb.private<span class="op">$</span>price)</span></code></pre></div>
<pre><code>## 
## 	Anderson-Darling normality test
## 
## data:  airbnb.private$price
## A = 372.05, p-value &lt; 2.2e-16</code></pre>
<p>Mais uma vez, rejeitamos a hipótese nula de normalidade. Deixo como exercício para testar a normalidade dos preços de casas e apartamentos inteiros.</p>
<p>Agora que sabemos que a suposição de normalidade é violada, o que podemos fazer? Podemos considerar transformar nossa variável dependente com uma transformação de log:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb117-1"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>airbnb, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">log</span>(price, <span class="dt">base =</span> <span class="kw">exp</span> (<span class="dv">1</span>)))) <span class="op">+</span><span class="st"> </span><span class="co"># Queremos o preco transformado em log no eixo X.</span></span>
<span id="cb117-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb117-2"></a><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>room_type) <span class="op">+</span><span class="st"> </span><span class="co"># Queremos que isso seja dividido por room_type. Facet_wrap garantira que o ggplot crie paineis diferentes no seu grafico.</span></span>
<span id="cb117-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb117-3"></a><span class="st"> </span><span class="kw">geom_histogram</span>() <span class="co"># geom_histogram garante que as frequencias dos valores no eixo X sejam plotadas.</span></span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-74-1.png" width="672" /></p>
<p>Como você pode ver, uma transformação de log normaliza uma distribuição inclinada à direita. Poderíamos então executar a ANOVA na variável dependente transformada em log. No entanto, na realidade, muitas vezes é seguro ignorar violações da suposição de normalidade (a menos que você esteja lidando com pequenas amostras, o que nós não somos). Vamos simplesmente continuar com o preço não transformado como variável dependente.</p>
</div>
<div id="suposição-homogeneidade-de-variâncias" class="section level3 unlisted unnumbered">
<h3>Suposição: homogeneidade de variâncias</h3>
<p>Uma segunda suposição que precisamos verificar é se as variações de nosso preço variável dependente são iguais nas categorias de nossa variável independente room_type. Normalmente, um gráfico boxplot é informativo:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb119-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> airbnb, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> room_type, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb119-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb119-2"></a><span class="st">  </span><span class="kw">geom_boxplot</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-75-1.png" width="672" /></p>
<p>Mas, neste caso, os intervalos interquartis (as alturas das caixas), que normalmente nos dariam uma idéia da variação dentro de cada tipo de quarto, são muito estreitos. Isso ocorre porque o intervalo de valores Y a ser plotado é muito amplo devido a alguns valores extremos. Se observarmos os desvios padrão, porém, veremos que estes são muito maiores para todos as salas e apartamentos do que para os quartos privativo e compartilhado:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb120-1"></a>airbnb <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb120-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb120-2"></a><span class="st">  </span><span class="kw">group_by</span>(room_type) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb120-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb120-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">n</span>(), <span class="co"># obtenha as frequencias dos diferentes tipos de quartos</span></span>
<span id="cb120-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb120-4"></a>            <span class="dt">mean_price =</span> <span class="kw">mean</span>(price), <span class="co"># o preco medio por tipo de quarto</span></span>
<span id="cb120-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb120-5"></a>            <span class="dt">sd_price =</span> <span class="kw">sd</span>(price)) <span class="co"># e o desvio padrao do preco por tipo de quarto</span></span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 3 x 4
##   room_type       count mean_price sd_price
##   &lt;chr&gt;           &lt;int&gt;      &lt;dbl&gt;    &lt;dbl&gt;
## 1 Entire home/apt 11082      113.     118. 
## 2 Private room     6416       64.3     46.5
## 3 Shared room       153       49.6     33.9</code></pre>
<p>Também podemos realizar um teste formal de homogeneidade de variâncias. Para isso, precisamos da função leveneTest do pacote car:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb123-1"></a><span class="co">#install.packages(&quot;car&quot;) # Para o teste de variancias iguais, precisamos de um pacote chamado car. Instalamos isso antes, portanto, nao eh necessario reinstala-lo se voce ja o tiver feito.</span></span>
<span id="cb123-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb123-2"></a></span>
<span id="cb123-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb123-3"></a><span class="kw">library</span>(car)</span>
<span id="cb123-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb123-4"></a></span>
<span id="cb123-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb123-5"></a><span class="co">#Teste de Levene de variancias iguais.</span></span>
<span id="cb123-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb123-6"></a><span class="co"># Valor baixo de p significa que as variancias nao sao iguais.</span></span>
<span id="cb123-7"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb123-7"></a><span class="co"># Primeiro argumento = variavel dependente continua, segundo argumento = variavel independente categorica.</span></span>
<span id="cb123-8"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb123-8"></a></span>
<span id="cb123-9"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb123-9"></a><span class="kw">leveneTest</span>(airbnb<span class="op">$</span>price, airbnb<span class="op">$</span>room_type) </span></code></pre></div>
<pre><code>## Warning in leveneTest.default(airbnb$price, airbnb$room_type): airbnb$room_type coerced to
## factor.</code></pre>
<pre><code>## Levene&#39;s Test for Homogeneity of Variance (center = median)
##          Df F value    Pr(&gt;F)    
## group     2  140.07 &lt; 2.2e-16 ***
##       17648                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Como o valor <span class="math inline">\(p\)</span> é extremamente pequeno, rejeitamos a hipótese nula de variâncias iguais. Assim como no pressuposto da normalidade, as violações do pressuposto de variâncias iguais podem, no entanto, ser frequentemente ignoradas e o faremos neste caso.</p>
</div>
<div id="anova" class="section level3 unlisted unnumbered">
<h3>ANOVA</h3>
<p>Para realizar uma ANOVA, precisamos instalar alguns pacotes:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb126-1"></a><span class="co">#install.packages(remotes) #O pacote de controles remotos nos permite instalar pacotes armazenados no GitHub, um site para desenvolvedores de pacotes. </span></span>
<span id="cb126-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb126-2"></a><span class="co">#install.packages(&quot;car&quot;) #Também precisaremos do pacote do carro para executar a ANOVA (não é necessário reinstalá-lo se você já tiver feito isso).</span></span>
<span id="cb126-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb126-3"></a></span>
<span id="cb126-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb126-4"></a><span class="kw">library</span>(remotes)</span>
<span id="cb126-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb126-5"></a><span class="kw">install_github</span>(<span class="st">&#39;samuelfranssens/type3anova&#39;</span>) <span class="co"># Instala o pacote type3anova. Esta e as etapas anteriores precisam ser executadas apenas uma vez.</span></span></code></pre></div>
<pre><code>## Skipping install of &#39;type3anova&#39; from a github remote, the SHA1 (0c38377d) has not changed since last install.
##   Use `force = TRUE` to force installation</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb128-1"></a><span class="kw">library</span>(type3anova) <span class="co"># Carregue o pacote type3anova.</span></span></code></pre></div>
<p>Agora podemos prosseguir com a ANOVA verdadeira:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb129-1"></a><span class="co"># Primeiro cria um modelo linear</span></span>
<span id="cb129-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb129-2"></a><span class="co"># A formula lm() toma os argumentos de dados </span></span>
<span id="cb129-3"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb129-3"></a><span class="co"># A fórmula tem a seguinte sintaxe: variável dependente ~ variável (s) independente</span></span>
<span id="cb129-4"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb129-4"></a></span>
<span id="cb129-5"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb129-5"></a>linearmodel &lt;-<span class="st"> </span><span class="kw">lm</span>(price <span class="op">~</span><span class="st"> </span>room_type, <span class="dt">data=</span>airbnb) </span>
<span id="cb129-6"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb129-6"></a></span>
<span id="cb129-7"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb129-7"></a><span class="co"># Em seguida, peça a saída no formato ANOVA. Isso fornece a soma dos quadrados do Tipo III. </span></span>
<span id="cb129-8"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb129-8"></a><span class="co"># Observe que isso é diferente da anova (modelo linear), que fornece a soma dos quadrados do tipo I.</span></span>
<span id="cb129-9"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb129-9"></a></span>
<span id="cb129-10"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb129-10"></a><span class="kw">type3anova</span>(linearmodel) </span></code></pre></div>
<pre><code>## # A tibble: 3 x 6
##   term                ss   df1   df2     f pvalue
##   &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 (Intercept)   7618725.     1 17648  803.      0
## 2 room_type    10120155.     2 17648  534.      0
## 3 Residuals   167364763. 17648 17648   NA      NA</code></pre>
<p>Nesse caso, o valor-p associado ao efeito de room_type é praticamente 0, o que significa que rejeitamos a hipótese nula de que o preço médio é igual para cada room_type. Você pode relatar o seguinte: “Houve diferenças significativas entre os preços médios das diferentes tipos de salas (<span class="math inline">\(F (2, 17648) = 533,57, p &lt;0,001\)</span>).”</p>
</div>
<div id="teste-de-tuckey-de-diferença-significativa-verdadeira" class="section level3 unlisted unnumbered">
<h3>Teste de Tuckey de diferença significativa verdadeira</h3>
<p>Observe que a ANOVA testa a hipótese nula de que as médias em todos os nossos grupos são iguais. A rejeição desta hipótese nula significa que há uma diferença significativa em pelo menos um dos possíveis pares de médias (ou seja, em casa / apartamento inteiro vs. privado e / ou em casa / apartamento inteiro vs. compartilhado e / ou privado) vs. compartilhado). Para ter uma idéia de qual par de médias contém uma diferença significativa, podemos acompanhar o teste de Tukey, que nos dará todas as comparações pareadas.</p>
<p>O teste de Tukey corrige os valores de p para cima - portanto, é mais conservador decidir que algo é significativo - porque as comparações são post-hoc ou exploratórias:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb131-1"></a><span class="kw">TukeyHSD</span>(<span class="kw">aov</span>(price <span class="op">~</span><span class="st"> </span>room_type, <span class="dt">data=</span>airbnb), </span>
<span id="cb131-2"><a href="análise-básica-de-dados-analisando-dados-secundários.html#cb131-2"></a>         <span class="st">&quot;room_type&quot;</span>) <span class="co"># O primeiro argumento eh um objeto &quot;aov&quot;, o segundo eh a nossa variavel independente.</span></span></code></pre></div>
<pre><code>##   Tukey multiple comparisons of means
##     95% family-wise confidence level
## 
## Fit: aov(formula = price ~ room_type, data = airbnb)
## 
## $room_type
##                                   diff       lwr        upr    p adj
## Private room-Entire home/apt -49.11516 -52.69593 -45.534395 0.000000
## Shared room-Entire home/apt  -63.79178 -82.37217 -45.211381 0.000000
## Shared room-Private room     -14.67661 -33.34879   3.995562 0.155939</code></pre>
<p>Isso nos mostra que não há diferença significativa no preço médio de quartos compartilhados e privados, mas que quartos compartilhados e quartos particulares diferem significativamente de casas e apartamentos inteiros.</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introdução-ao-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regressão-linear.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rhozon/rparamkt/edit/master/03-AnaliseBasicadedados.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/rhozon/rparamkt/blob/master/03-AnaliseBasicadedados.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
