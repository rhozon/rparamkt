<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Análise de cluster para segmentação | R para Estudantes de Marketing</title>
  <meta name="description" content="Análise de cluster para segmentação | R para Estudantes de Marketing" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Análise de cluster para segmentação | R para Estudantes de Marketing" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Análise de cluster para segmentação | R para Estudantes de Marketing" />
  
  
  

<meta name="author" content="KU Leuven Marketing department (tradução: Rodrigo Hermont Ozon)" />


<meta name="date" content="2020-09-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="análise-de-componentes-principais-para-mapas-perceptivos-toothpaste-dataset.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R para Estudantes de Marketing</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Sobre o autor desta tradução</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#resumo"><i class="fa fa-check"></i>Resumo</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#download-e-instalação-do-r-e-do-rstudio"><i class="fa fa-check"></i>Download e instalação do R e do RStudio</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#obtendo-familiaridade-com-o-studio"><i class="fa fa-check"></i>Obtendo familiaridade com o Studio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#console-vs.-script"><i class="fa fa-check"></i>Console vs. script</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#comentários"><i class="fa fa-check"></i>Comentários</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pacotes"><i class="fa fa-check"></i>Pacotes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html"><i class="fa fa-check"></i>Introdução ao R</a><ul>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#importando-dados"><i class="fa fa-check"></i>Importando dados</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#importando-arquivos-.csv"><i class="fa fa-check"></i>Importando arquivos .csv</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#ajustando-seu-diretório-de-trabalho"><i class="fa fa-check"></i>Ajustando seu diretório de trabalho</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#atribuindo-dados-a-objetos"><i class="fa fa-check"></i>Atribuindo dados a objetos</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#importando-arquivos-do-excel"><i class="fa fa-check"></i>Importando arquivos do Excel</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#lendo-os-dados-do-airbnb"><i class="fa fa-check"></i>Lendo os dados do Airbnb</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#manipulando-dataframes"><i class="fa fa-check"></i>Manipulando dataframes</a><ul>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#transformando-variáveis"><i class="fa fa-check"></i>Transformando variáveis</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#transformações-numéricas"><i class="fa fa-check"></i>Transformações numéricas</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#transformando-variáveis-com-a-função-mutate"><i class="fa fa-check"></i>Transformando variáveis com a função mutate</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#incluindo-ou-excluindo-e-renomeando-variáveis-colunas"><i class="fa fa-check"></i>Incluindo ou excluindo e renomeando variáveis (colunas)</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#incluindo-ou-excluindo-observações-linhas"><i class="fa fa-check"></i>Incluindo ou excluindo observações (linhas)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#o-operador-pipe"><i class="fa fa-check"></i>O operador pipe</a><ul>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#uma-maneira-de-escrever-o-código"><i class="fa fa-check"></i>Uma maneira de escrever o código</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#agrupando-e-resumindo"><i class="fa fa-check"></i>Agrupando e resumindo</a><ul>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#tabelas-de-frequência"><i class="fa fa-check"></i>Tabelas de frequência</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#estatísticas-descritivas"><i class="fa fa-check"></i>Estatísticas Descritivas</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#exportando-summaries-dos-dados"><i class="fa fa-check"></i>Exportando (summaries) dos dados</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#gráficos"><i class="fa fa-check"></i>Gráficos</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#diagrama-de-dispersão-scatterplot"><i class="fa fa-check"></i>Diagrama de dispersão (scatterplot)</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#jitter"><i class="fa fa-check"></i>Jitter</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#histograma"><i class="fa fa-check"></i>Histograma</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#transformação-logarítmica"><i class="fa fa-check"></i>Transformação logarítmica</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#plotando-a-mediana"><i class="fa fa-check"></i>Plotando a mediana</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#plotando-a-média"><i class="fa fa-check"></i>Plotando a média</a></li>
<li class="chapter" data-level="" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#salvando-imagens"><i class="fa fa-check"></i>Salvando imagens</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html"><i class="fa fa-check"></i>Análise básica de dados: analisando dados secundários</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#dados"><i class="fa fa-check"></i>Dados</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#importação"><i class="fa fa-check"></i>Importação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#manipulação"><i class="fa fa-check"></i>Manipulação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#mesclando-datasets"><i class="fa fa-check"></i>Mesclando datasets</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#recapitulando-importação-e-manipulação"><i class="fa fa-check"></i>Recapitulando: importação e manipulação</a></li>
<li><a href="análise-básica-de-dados-analisando-dados-secundários.html#amostras-independentes-teste-t">Amostras independentes: teste <span class="math inline">\(t\)</span></a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#anova-univariada"><i class="fa fa-check"></i>ANOVA univariada</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#suposição-de-normalidade-de-resíduos"><i class="fa fa-check"></i>Suposição de normalidade de resíduos</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#suposição-homogeneidade-de-variâncias"><i class="fa fa-check"></i>Suposição: homogeneidade de variâncias</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#anova"><i class="fa fa-check"></i>ANOVA</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#teste-de-tuckey-de-diferença-significativa-verdadeira"><i class="fa fa-check"></i>Teste de Tuckey de diferença significativa verdadeira</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#regressão-linear-simples"><i class="fa fa-check"></i>Regressão Linear Simples</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#correlação"><i class="fa fa-check"></i>Correlação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#regressão-linear-múltipla-com-interação"><i class="fa fa-check"></i>Regressão linear múltipla, com interação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#premissas"><i class="fa fa-check"></i>Premissas</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#normalidade-de-resíduos"><i class="fa fa-check"></i>Normalidade de resíduos</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#homocedasticidade-de-resíduos"><i class="fa fa-check"></i>Homocedasticidade de resíduos</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#multicolinearidade"><i class="fa fa-check"></i>Multicolinearidade</a></li>
<li><a href="análise-básica-de-dados-analisando-dados-secundários.html#teste-chi2">Teste <span class="math inline">\(\chi^{2}\)</span></a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#medindo-o-ajuste-de-uma-regressão-logística-porcentagem-classificada-corretamente"><i class="fa fa-check"></i>Medindo o ajuste de uma regressão logística: porcentagem classificada corretamente</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html"><i class="fa fa-check"></i>Análise Básica de Dados: Experimentos</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#dados"><i class="fa fa-check"></i>Dados</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#importação"><i class="fa fa-check"></i>Importação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#manipulação"><i class="fa fa-check"></i>Manipulação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#fatorar-algumas-variáveis"><i class="fa fa-check"></i>Fatorar algumas variáveis</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#calcular-a-consistência-interna-e-a-média-de-perguntas-que-medem-o-mesmo-conceito"><i class="fa fa-check"></i>Calcular a consistência interna e a média de perguntas que medem o mesmo conceito</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#recapitulando-importando-e-manipulando"><i class="fa fa-check"></i>Recapitulando: importando e manipulando</a></li>
</ul></li>
<li><a href="análise-básica-de-dados-experimentos.html#teste-t">Teste <span class="math inline">\(t\)</span></a><ul>
<li><a href="análise-básica-de-dados-experimentos.html#teste-t-para-amostras-independentes">Teste <span class="math inline">\(t\)</span> para amostras independentes</a></li>
<li><a href="análise-básica-de-dados-experimentos.html#teste-t-para-amostras-dependentes">Teste <span class="math inline">\(t\)</span> para amostras dependentes</a></li>
<li><a href="análise-básica-de-dados-experimentos.html#teste-t-para-amostra-única">Teste <span class="math inline">\(t\)</span> para amostra única</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#anova-bivariada"><i class="fa fa-check"></i>ANOVA Bivariada</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#seguindo-com-contrastes"><i class="fa fa-check"></i>Seguindo com contrastes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#análise-de-moderação-interação-entre-variáveis-independentes-contínuas-e-categóricas"><i class="fa fa-check"></i>Análise de moderação: interação entre variáveis independentes contínuas e categóricas</a><ul>
<li><a href="análise-básica-de-dados-experimentos.html#análise-spotlight">Análise <em>spotlight</em></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#análise-ancova"><i class="fa fa-check"></i>Análise ANCOVA</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-experimentos.html"><a href="análise-básica-de-dados-experimentos.html#medidas-repetidas-anova"><i class="fa fa-check"></i>Medidas repetidas ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><i class="fa fa-check"></i>Análise de componentes principais para mapas perceptivos (office dataset)</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#dados"><i class="fa fa-check"></i>Dados</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#importação"><i class="fa fa-check"></i>Importação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#manipulação"><i class="fa fa-check"></i>Manipulação</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#recapitulação-importação-e-manipulação"><i class="fa fa-check"></i>Recapitulação: importação e manipulação</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#quantos-fatores-devemos-considerar"><i class="fa fa-check"></i>Quantos fatores devemos considerar ?</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#análise-de-componentes-principais"><i class="fa fa-check"></i>Análise de Componentes Principais</a><ul>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#cargas-fatoriais"><i class="fa fa-check"></i>Cargas fatoriais</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#plotando-as-cargas-fatoriais"><i class="fa fa-check"></i>Plotando as cargas fatoriais</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-toothpaste-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-toothpaste-dataset.html"><i class="fa fa-check"></i>Análise de componentes principais para mapas perceptivos (toothpaste dataset)</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#dados"><i class="fa fa-check"></i>Dados</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#importação"><i class="fa fa-check"></i>Importação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#manipulação"><i class="fa fa-check"></i>Manipulação</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#recapitulação-importação-e-manipulação"><i class="fa fa-check"></i>Recapitulação: importação e manipulação</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#quantos-fatores-devemos-considerar"><i class="fa fa-check"></i>Quantos fatores devemos considerar ?</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#análise-de-componentes-principais"><i class="fa fa-check"></i>Análise de Componentes Principais</a><ul>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#cargas-fatoriais"><i class="fa fa-check"></i>Cargas fatoriais</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-toothpaste-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-toothpaste-dataset.html#gráfico-das-cargas-fatoriais"><i class="fa fa-check"></i>Gráfico das cargas fatoriais</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-cluster-para-segmentação.html"><a href="análise-de-cluster-para-segmentação.html"><i class="fa fa-check"></i>Análise de cluster para segmentação</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#dados"><i class="fa fa-check"></i>Dados</a><ul>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#importação"><i class="fa fa-check"></i>Importação</a></li>
<li class="chapter" data-level="" data-path="análise-básica-de-dados-analisando-dados-secundários.html"><a href="análise-básica-de-dados-analisando-dados-secundários.html#manipulação"><i class="fa fa-check"></i>Manipulação</a></li>
<li class="chapter" data-level="" data-path="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html"><a href="análise-de-componentes-principais-para-mapas-perceptivos-office-dataset.html#recapitulação-importação-e-manipulação"><i class="fa fa-check"></i>Recapitulação: importação e manipulação</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-cluster-para-segmentação.html"><a href="análise-de-cluster-para-segmentação.html#análise-de-cluster"><i class="fa fa-check"></i>Análise de Cluster</a><ul>
<li class="chapter" data-level="" data-path="análise-de-cluster-para-segmentação.html"><a href="análise-de-cluster-para-segmentação.html#padronizar-ou-não"><i class="fa fa-check"></i>Padronizar ou não ?</a></li>
<li class="chapter" data-level="" data-path="análise-de-cluster-para-segmentação.html"><a href="análise-de-cluster-para-segmentação.html#cluster-hierárquico"><i class="fa fa-check"></i>Cluster hierárquico</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análise-de-cluster-para-segmentação.html"><a href="análise-de-cluster-para-segmentação.html#cluster-não-hierárquico"><i class="fa fa-check"></i>Cluster não-hierárquico</a></li>
<li class="chapter" data-level="" data-path="análise-de-cluster-para-segmentação.html"><a href="análise-de-cluster-para-segmentação.html#lda-canônico"><i class="fa fa-check"></i>LDA Canônico</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R para Estudantes de Marketing</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="análise-de-cluster-para-segmentação" class="section level1 unlisted unnumbered">
<h1>Análise de cluster para segmentação</h1>
<p>Neste capítulo, você aprenderá como realizar uma análise de cluster e uma análise discriminante linear.</p>
<p>Uma análise de cluster trabalha em um grupo de observações que diferem entre si em várias dimensões. Ele encontrará clusters de observações no espaço n-dimensional, de modo que a semelhança de observações dentro de clusters seja a mais alta possível e a similaridade de observações entre clusters seja a mais baixa possível. Você sempre pode executar uma análise de cluster e pode solicitar qualquer número de clusters. O número máximo de clusters é o número total de observações. Nesse caso, cada observação será um cluster, mas isso não seria um cluster muito útil. O objetivo do agrupamento em cluster é encontrar um pequeno número de clusters que possam ser descritos de forma significativa por suas pontuações médias nas n dimensões. Em outras palavras, o objetivo é encontrar diferentes ‘perfis’ de observações.</p>
<p>A análise discriminante linear tenta prever uma variável categórica com base em várias variáveis independentes contínuas ou categóricas. É semelhante à regressão logística. Nós o usaremos para prever a associação de cluster de uma observação (conforme estabelecido pela análise de cluster) com base em algumas variáveis de segmentação (ou seja, outras informações que temos sobre as observações que não serviram de entrada na análise de cluster).</p>
<p>Analisaremos os dados de 40 entrevistados que avaliaram a importância de vários atributos da loja ao comprar equipamentos de escritório. Usaremos a análise de cluster para encontrar agrupamentos de observações, neste caso, agrupamentos de respondentes. Esses clusters terão perfis diferentes (por exemplo, um cluster pode atribuir importância à política de preços e devoluções, o outro pode atribuir importância à variedade de opções e qualidade de serviço). Em seguida, usaremos a análise discriminante linear para testar se podemos prever a associação ao cluster (ou seja, que tipo de comprador de equipamento de escritório alguém é) com base em várias características dos entrevistados (por exemplo, sua renda).</p>
<div id="dados" class="section level2 unlisted unnumbered">
<h2>Dados</h2>
<div id="importação" class="section level3 unlisted unnumbered">
<h3>Importação</h3>
<p>Analisaremos os dados de uma pesquisa na qual 40 entrevistados foram solicitados a avaliar a importância de vários atributos da loja ao comprar equipamentos. Faça o download dos dados <a href="http://users.telenet.be/samuelfranssens/tutorial_data/segmentation_office.xlsx">aqui</a> e importe-os para o R:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="análise-de-cluster-para-segmentação.html#cb1-1"></a><span class="kw">library</span>(tidyverse) </span></code></pre></div>
<pre><code>## -- Attaching packages -------------------------------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## v ggplot2 3.3.2     v purrr   0.3.4
## v tibble  3.0.3     v dplyr   1.0.0
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.5.0</code></pre>
<pre><code>## -- Conflicts ----------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="análise-de-cluster-para-segmentação.html#cb5-1"></a><span class="kw">library</span>(readxl)</span>
<span id="cb5-2"><a href="análise-de-cluster-para-segmentação.html#cb5-2"></a></span>
<span id="cb5-3"><a href="análise-de-cluster-para-segmentação.html#cb5-3"></a>url&lt;-<span class="st">&quot;http://users.telenet.be/samuelfranssens/tutorial_data/segmentation_office.xlsx&quot;</span></span>
<span id="cb5-4"><a href="análise-de-cluster-para-segmentação.html#cb5-4"></a>equipment &lt;-<span class="st"> </span><span class="kw">tempfile</span>()</span>
<span id="cb5-5"><a href="análise-de-cluster-para-segmentação.html#cb5-5"></a><span class="kw">download.file</span>(url, equipment, <span class="dt">mode=</span><span class="st">&quot;wb&quot;</span>)</span>
<span id="cb5-6"><a href="análise-de-cluster-para-segmentação.html#cb5-6"></a>equipment&lt;-<span class="kw">read_excel</span>(<span class="dt">path =</span> equipment, <span class="dt">sheet =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
<div id="manipulação" class="section level3 unlisted unnumbered">
<h3>Manipulação</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="análise-de-cluster-para-segmentação.html#cb6-1"></a>equipment[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,]</span></code></pre></div>
<pre><code>## # A tibble: 5 x 10
##   respondent_id variety_of_choi~ electronics furniture quality_of_serv~
##           &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;            &lt;dbl&gt;
## 1             1                8           6         6                3
## 2             2                6           3         1                4
## 3             3                6           1         2                4
## 4             4                8           3         3                4
## 5             5                4           6         3                9
## # ... with 5 more variables: low_prices &lt;dbl&gt;, return_policy &lt;dbl&gt;,
## #   professional &lt;dbl&gt;, income &lt;dbl&gt;, age &lt;dbl&gt;</code></pre>
<p>Temos 10 colunas ou variáveis em nossos dados:</p>
<ul>
<li>respondent_id é um identificador para nossas observações</li>
<li>Os entrevistados classificaram a importância de cada um dos seguintes atributos em uma escala de 1 a 10: variety_of_choice, electronic, furniture, quality_of_service, low_prices, return_policy.</li>
<li>professional: 1 para profissionais, 0 para não profissionais</li>
<li>income: expresso em milhares de dólares</li>
<li>age</li>
</ul>
<p>A análise de cluster tentará identificar clusters com padrões semelhantes de classificações. A análise discriminante linear preverá a associação do cluster com base nas variáveis de segmentação (professional}, income}, e age}).</p>
<p>Como sempre, vamos fatorar as variáveis que devem ser tratadas como categóricas:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="análise-de-cluster-para-segmentação.html#cb8-1"></a>equipment &lt;-<span class="st"> </span>equipment <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-2"><a href="análise-de-cluster-para-segmentação.html#cb8-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">respondent_id =</span> <span class="kw">factor</span>(respondent_id),</span>
<span id="cb8-3"><a href="análise-de-cluster-para-segmentação.html#cb8-3"></a>         <span class="dt">professional =</span> <span class="kw">factor</span>(professional, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;non-professional&quot;</span>,<span class="st">&quot;professional&quot;</span>)))</span></code></pre></div>
</div>
<div id="recapitulação-importação-e-manipulação" class="section level3 unlisted unnumbered">
<h3>Recapitulação: importação e manipulação</h3>
<p>Aqui está o que fizemos até agora, em uma sequência ordenada de operações canalizadas/pipe (faça o download dos dados <a href="http://users.telenet.be/samuelfranssens/tutorial_data/segmentation_office.xlsx">aqui</a>):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="análise-de-cluster-para-segmentação.html#cb9-1"></a><span class="co">#library(tidyverse) </span></span>
<span id="cb9-2"><a href="análise-de-cluster-para-segmentação.html#cb9-2"></a><span class="co">#library(readxl)</span></span>
<span id="cb9-3"><a href="análise-de-cluster-para-segmentação.html#cb9-3"></a></span>
<span id="cb9-4"><a href="análise-de-cluster-para-segmentação.html#cb9-4"></a><span class="co">#equipment &lt;- read_excel(&quot;segmentation_office.xlsx&quot;,&quot;SegmentationData&quot;) %&gt;%</span></span>
<span id="cb9-5"><a href="análise-de-cluster-para-segmentação.html#cb9-5"></a> <span class="co"># mutate(respondent_id = factor(respondent_id),</span></span>
<span id="cb9-6"><a href="análise-de-cluster-para-segmentação.html#cb9-6"></a>  <span class="co">#       professional = factor(professional, labels = c(&quot;non-professional&quot;,&quot;professional&quot;)))</span></span></code></pre></div>
</div>
</div>
<div id="análise-de-cluster" class="section level2 unlisted unnumbered">
<h2>Análise de Cluster</h2>
<p>Primeiro, realizaremos uma análise hierárquica de cluster para encontrar o número ideal de clusters. Depois disso, realizaremos uma análise de cluster não hierárquica e solicitaremos o número de clusters considerados ideais pela análise de cluster hierárquica. As variáveis que servirão de entrada para a análise de cluster são as classificações de importância dos atributos da loja.</p>
<div id="padronizar-ou-não" class="section level3 unlisted unnumbered">
<h3>Padronizar ou não ?</h3>
<p>A primeira etapa de uma análise de cluster é decidir se padronizará as variáveis de entrada. A padronização não é necessária quando as variáveis de entrada são medidas na mesma escala ou quando as variáveis de entrada são os coeficientes obtidos por uma análise conjunta. Em outros casos, a padronização é necessária.</p>
<p>No nosso exemplo, todas as variáveis de entrada são medidas na mesma escala e, portanto, a padronização não é necessária. Se necessário, isso pode ser feito facilmente com mutate(newvar = scale(oldvar))).</p>
</div>
<div id="cluster-hierárquico" class="section level3 unlisted unnumbered">
<h3>Cluster hierárquico</h3>
<p>Em seguida, criamos um novo conjunto de dados que inclui apenas as variáveis de entrada, ou seja, as classificações:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="análise-de-cluster-para-segmentação.html#cb10-1"></a>cluster.data &lt;-<span class="st"> </span>equipment <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-2"><a href="análise-de-cluster-para-segmentação.html#cb10-2"></a><span class="st">  </span><span class="kw">select</span>(variety_of_choice, electronics, furniture, quality_of_service, low_prices, return_policy) <span class="co"># Selecione no conjunto de dados do equipamento apenas as variaveis com classificacoes padronizadas</span></span></code></pre></div>
<p>Agora, podemos prosseguir com o cluster hierárquico para determinar o número ideal de clusters:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="análise-de-cluster-para-segmentação.html#cb11-1"></a><span class="co"># A funcao dist() cria uma matriz de dissimilaridade do nosso conjunto de dados e deve ser o primeiro argumento para a funcao hclust().</span></span>
<span id="cb11-2"><a href="análise-de-cluster-para-segmentação.html#cb11-2"></a><span class="co"># No argumento do metodo, voce pode especificar o metodo a ser usado para armazenamento em cluster.</span></span>
<span id="cb11-3"><a href="análise-de-cluster-para-segmentação.html#cb11-3"></a>hierarchical.clustering &lt;-<span class="st"> </span><span class="kw">hclust</span>(<span class="kw">dist</span>(cluster.data), <span class="dt">method =</span> <span class="st">&quot;ward.D&quot;</span>) </span></code></pre></div>
<p>A análise de cluster é armazenada no objeto hierarchical.clustering e pode ser facilmente visualizada por um dendograma:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="análise-de-cluster-para-segmentação.html#cb12-1"></a><span class="kw">plot</span>(hierarchical.clustering)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>A partir desse dendograma, parece que podemos dividir as observações em dois, três ou seis grupos de observações. Vamos realizar um teste formal, a regra de parada de Duda-Hart, para ver quantos clusters devemos reter. Para isso, precisamos (instalar e) carregar o pacote NbClust}:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="análise-de-cluster-para-segmentação.html#cb13-1"></a><span class="co">#install.packages(&quot;NbClust&quot;)</span></span>
<span id="cb13-2"><a href="análise-de-cluster-para-segmentação.html#cb13-2"></a><span class="kw">library</span>(NbClust)</span></code></pre></div>
<p>A tabela de regras de parada de Duda-Hart pode ser obtida da seguinte maneira:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="análise-de-cluster-para-segmentação.html#cb14-1"></a>duda &lt;-<span class="st"> </span><span class="kw">NbClust</span>(cluster.data, <span class="dt">distance =</span> <span class="st">&quot;euclidean&quot;</span>, <span class="dt">method =</span> <span class="st">&quot;ward.D2&quot;</span>, <span class="dt">max.nc =</span> <span class="dv">9</span>, <span class="dt">index =</span> <span class="st">&quot;duda&quot;</span>)</span>
<span id="cb14-2"><a href="análise-de-cluster-para-segmentação.html#cb14-2"></a>pseudot2 &lt;-<span class="st"> </span><span class="kw">NbClust</span>(cluster.data, <span class="dt">distance =</span> <span class="st">&quot;euclidean&quot;</span>, <span class="dt">method =</span> <span class="st">&quot;ward.D2&quot;</span>, <span class="dt">max.nc =</span> <span class="dv">9</span>, <span class="dt">index =</span> <span class="st">&quot;pseudot2&quot;</span>)</span>
<span id="cb14-3"><a href="análise-de-cluster-para-segmentação.html#cb14-3"></a></span>
<span id="cb14-4"><a href="análise-de-cluster-para-segmentação.html#cb14-4"></a>duda<span class="op">$</span>All.index</span></code></pre></div>
<pre><code>##      2      3      4      5      6      7      8      9 
## 0.2997 0.7389 0.7540 0.5820 0.4229 0.7534 0.5899 0.7036</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="análise-de-cluster-para-segmentação.html#cb16-1"></a>pseudot2<span class="op">$</span>All.index</span></code></pre></div>
<pre><code>##       2       3       4       5       6       7       8       9 
## 46.7352  5.6545  3.9145  4.3091  5.4591  3.2728  3.4757  2.9490</code></pre>
<p>A sabedoria convencional para decidir o número de grupos com base na regra de parada de Duda-Hart é encontrar um dos maiores valores de Duda que corresponda a um baixo valor de pseudo-<span class="math inline">\(T^2\)</span>. No entanto, você também pode solicitar o número ideal de clusters, conforme sugerido pela regra de parada:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="análise-de-cluster-para-segmentação.html#cb18-1"></a>duda<span class="op">$</span>Best.nc</span></code></pre></div>
<pre><code>## Number_clusters     Value_Index 
##          3.0000          0.7389</code></pre>
<p>Nesse caso, o número ideal é três.</p>
</div>
</div>
<div id="cluster-não-hierárquico" class="section level2 unlisted unnumbered">
<h2>Cluster não-hierárquico</h2>
<p>Agora, realizamos uma análise de cluster não hierárquica na qual solicitamos três clusters (conforme determinado pela análise de cluster hierárquica):</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="análise-de-cluster-para-segmentação.html#cb20-1"></a><span class="co"># existe um elemento aleatorio na analise de cluster</span></span>
<span id="cb20-2"><a href="análise-de-cluster-para-segmentação.html#cb20-2"></a><span class="co"># isso significa que voce nem sempre obtera a mesma saida toda vez que fizer uma analise de cluster</span></span>
<span id="cb20-3"><a href="análise-de-cluster-para-segmentação.html#cb20-3"></a><span class="co"># se voce deseja obter sempre a mesma saida, eh necessario corrigir o gerador de numeros aleatorios de R com o comando set.seed</span></span>
<span id="cb20-4"><a href="análise-de-cluster-para-segmentação.html#cb20-4"></a><span class="kw">set.seed</span> (<span class="dv">1</span>)</span>
<span id="cb20-5"><a href="análise-de-cluster-para-segmentação.html#cb20-5"></a></span>
<span id="cb20-6"><a href="análise-de-cluster-para-segmentação.html#cb20-6"></a><span class="co"># o argumento nstart deve ser incluido e definido como 25, mas sua explicacao esta fora do escopo deste tutorial</span></span>
<span id="cb20-7"><a href="análise-de-cluster-para-segmentação.html#cb20-7"></a>kmeans.clustering &lt;-<span class="st"> </span><span class="kw">kmeans</span>(cluster.data, <span class="dv">3</span>, <span class="dt">nstart =</span> <span class="dv">25</span>)</span></code></pre></div>
<p>Adicione ao conjunto de dados equipament} uma variável que indique a qual cluster uma observação pertence:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="análise-de-cluster-para-segmentação.html#cb21-1"></a>equipment &lt;-<span class="st"> </span>equipment <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-2"><a href="análise-de-cluster-para-segmentação.html#cb21-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">km.group =</span> <span class="kw">factor</span>(kmeans.clustering<span class="op">$</span>cluster, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;cl1&quot;</span>,<span class="st">&quot;cl2&quot;</span>,<span class="st">&quot;cl3&quot;</span>))) <span class="co"># Fatore o indicador de cluster a partir do quadro de dados clustering k e adicione-o ao quadro de dados do equipamento.</span></span></code></pre></div>
<p>Inspeciona os clusters:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="análise-de-cluster-para-segmentação.html#cb22-1"></a>equipment <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-2"><a href="análise-de-cluster-para-segmentação.html#cb22-2"></a><span class="st">  </span><span class="kw">group_by</span>(km.group) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># agrupado por cluster (km.group)</span></span>
<span id="cb22-3"><a href="análise-de-cluster-para-segmentação.html#cb22-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">n</span>(), </span>
<span id="cb22-4"><a href="análise-de-cluster-para-segmentação.html#cb22-4"></a>            <span class="dt">variety =</span> <span class="kw">mean</span>(variety_of_choice), </span>
<span id="cb22-5"><a href="análise-de-cluster-para-segmentação.html#cb22-5"></a>            <span class="dt">electronics =</span> <span class="kw">mean</span>(electronics), </span>
<span id="cb22-6"><a href="análise-de-cluster-para-segmentação.html#cb22-6"></a>            <span class="dt">furniture =</span> <span class="kw">mean</span>(furniture), </span>
<span id="cb22-7"><a href="análise-de-cluster-para-segmentação.html#cb22-7"></a>            <span class="dt">service =</span> <span class="kw">mean</span>(quality_of_service), </span>
<span id="cb22-8"><a href="análise-de-cluster-para-segmentação.html#cb22-8"></a>            <span class="dt">prices =</span> <span class="kw">mean</span>(low_prices), </span>
<span id="cb22-9"><a href="análise-de-cluster-para-segmentação.html#cb22-9"></a>            <span class="dt">return =</span> <span class="kw">mean</span>(return_policy)) <span class="co">#Em seguida, pergunte pelo número de entrevistados e pelos meios das classificações.</span></span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 3 x 8
##   km.group count variety electronics furniture service prices return
##   &lt;fct&gt;    &lt;int&gt;   &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 cl1         14    6.93        2.79      1.43    3.5    8.29   6.29
## 2 cl2         18    9.11        6.06      5.78    2.39   3.67   3.17
## 3 cl3          8    5           4.38      1.75    8.5    2.5    4.38</code></pre>
<p>Vemos que:</p>
<ul>
<li>o cluster 1 atribui mais importância (do que outros clusters) à qualidade do serviço</li>
<li>o cluster 2 atribui mais importância à variedade de opções</li>
<li>o cluster 3 atribui mais importância a preços baixos</li>
</ul>
<p>Também podemos testar se há diferenças significativas entre os clusters, por exemplo, na variedade de opções. Para isso, usamos uma ANOVA unidirecional:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="análise-de-cluster-para-segmentação.html#cb25-1"></a><span class="co"># remotes::install_github(&quot;samuelfranssens/type3anova&quot;) # para instalar o pacote type3anova.</span></span>
<span id="cb25-2"><a href="análise-de-cluster-para-segmentação.html#cb25-2"></a><span class="co"># Voce precisa do pacote de controles remotos para isso e o pacote para carro precisa ser instalado para que o pacote type3anova funcione</span></span>
<span id="cb25-3"><a href="análise-de-cluster-para-segmentação.html#cb25-3"></a></span>
<span id="cb25-4"><a href="análise-de-cluster-para-segmentação.html#cb25-4"></a><span class="kw">library</span>(type3anova)</span>
<span id="cb25-5"><a href="análise-de-cluster-para-segmentação.html#cb25-5"></a><span class="kw">type3anova</span>(<span class="kw">lm</span>(variety_of_choice <span class="op">~</span><span class="st"> </span>km.group, <span class="dt">data=</span>equipment))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 6
##   term            ss   df1   df2      f pvalue
##   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 (Intercept) 1757.      1    37 1335.       0
## 2 km.group     101.      2    37   38.5      0
## 3 Residuals     48.7    37    37   NA       NA</code></pre>
<p>Existem diferenças significativas entre os clusters em importância associadas à variedade de opções, e isso faz sentido porque o objetivo da análise de clusters é maximizar as diferenças entre os clusters. Vamos acompanhar isso com o HSD de Tukey para ver exatamente quais meios diferem um do outro:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="análise-de-cluster-para-segmentação.html#cb27-1"></a><span class="kw">TukeyHSD</span>(<span class="kw">aov</span>(variety_of_choice <span class="op">~</span><span class="st"> </span>km.group, <span class="dt">data=</span>equipment), </span>
<span id="cb27-2"><a href="análise-de-cluster-para-segmentação.html#cb27-2"></a>         <span class="st">&quot;km.group&quot;</span>) <span class="co"># O primeiro argumento eh um objeto &quot;aov&quot;, o segundo eh a nossa variavel independente.</span></span></code></pre></div>
<pre><code>##   Tukey multiple comparisons of means
##     95% family-wise confidence level
## 
## Fit: aov(formula = variety_of_choice ~ km.group, data = equipment)
## 
## $km.group
##              diff       lwr        upr     p adj
## cl2-cl1  2.182540  1.184332  3.1807470 0.0000145
## cl3-cl1 -1.928571 -3.170076 -0.6870668 0.0015154
## cl3-cl2 -4.111111 -5.301397 -2.9208248 0.0000000</code></pre>
<p>Vemos que em todos os meios, a diferença é significativa.</p>
</div>
<div id="lda-canônico" class="section level2 unlisted unnumbered">
<h2>LDA Canônico</h2>
<p>Na vida real, geralmente não sabemos o que os potenciais compradores consideram importante, mas temos uma ideia, por exemplo, de sua renda, idade e status profissional. Portanto, seria útil testar quão bem podemos prever a associação ao cluster (perfil de classificações de importância) com base nas características dos respondentes (renda, idade, profissional), que também são chamados de variáveis de segmentação. A fórmula preditiva poderia então ser usada para prever a associação ao cluster de novos compradores em potencial. Para encontrar a fórmula correta, usamos a análise discriminante linear (LDA). Mas primeiro vamos dar uma olhada nas médias de income, age, e professional por cluster:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="análise-de-cluster-para-segmentação.html#cb29-1"></a>equipment <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb29-2"><a href="análise-de-cluster-para-segmentação.html#cb29-2"></a><span class="st">  </span><span class="kw">group_by</span>(km.group) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Agrupar equipamentos por cluster.</span></span>
<span id="cb29-3"><a href="análise-de-cluster-para-segmentação.html#cb29-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">income =</span> <span class="kw">mean</span>(income), </span>
<span id="cb29-4"><a href="análise-de-cluster-para-segmentação.html#cb29-4"></a>            <span class="dt">age =</span> <span class="kw">mean</span>(age), </span>
<span id="cb29-5"><a href="análise-de-cluster-para-segmentação.html#cb29-5"></a>            <span class="dt">professional =</span> <span class="kw">mean</span>(<span class="kw">as.numeric</span>(professional)<span class="op">-</span><span class="dv">1</span>)) </span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 3 x 4
##   km.group income   age professional
##   &lt;fct&gt;     &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;
## 1 cl1        32.1  30.9        0.5  
## 2 cl2        48.3  44.2        0.333
## 3 cl3        47.5  49          0.75</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="análise-de-cluster-para-segmentação.html#cb32-1"></a><span class="co">#visualiza as predicoes</span></span></code></pre></div>
<p>Vemos que o cluster 1 e 2 são um tanto semelhantes em termos de renda e idade, mas diferem na medida em que são compostos por profissionais. O cluster 3 difere do cluster 1 e 2 por ser mais jovem e menos rico.</p>
<p>Agora podemos usar o LDA para testar o quão bem podemos prever a associação do cluster com base na renda, idade e profissional:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="análise-de-cluster-para-segmentação.html#cb33-1"></a><span class="kw">library</span>(MASS) <span class="co"># We need the MASS package. Install it first if needed.</span></span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;MASS&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     select</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="análise-de-cluster-para-segmentação.html#cb36-1"></a>lda.cluster3 &lt;-<span class="st"> </span><span class="kw">lda</span>(km.group <span class="op">~</span><span class="st"> </span>income <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>professional, <span class="dt">data=</span>equipment, <span class="dt">CV=</span><span class="ot">TRUE</span>) <span class="co"># CV = TRUE ensures that we can store the prediction of the LDA in the following step</span></span>
<span id="cb36-2"><a href="análise-de-cluster-para-segmentação.html#cb36-2"></a>equipment &lt;-<span class="st"> </span>equipment <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb36-3"><a href="análise-de-cluster-para-segmentação.html#cb36-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">class =</span> <span class="kw">factor</span>(lda.cluster3<span class="op">$</span>class, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;lda1&quot;</span>,<span class="st">&quot;lda2&quot;</span>,<span class="st">&quot;lda3&quot;</span>))) <span class="co"># Save the prediction of the LDA as a factor. (The predictions are stored in lda.cluster3$class)</span></span></code></pre></div>
<p>Vamos ver como o LDA tem se saído bem:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="análise-de-cluster-para-segmentação.html#cb37-1"></a>ct &lt;-<span class="st"> </span><span class="kw">table</span>(equipment<span class="op">$</span>km.group, equipment<span class="op">$</span>class) <span class="co"># how many observations in each cluster were correctly predicted to be in that cluster by LDA?</span></span>
<span id="cb37-2"><a href="análise-de-cluster-para-segmentação.html#cb37-2"></a>ct</span></code></pre></div>
<pre><code>##      
##       lda1 lda2 lda3
##   cl1   12    2    0
##   cl2    3   12    3
##   cl3    2    3    3</code></pre>
<p>Vemos, por exemplo, que para as 14 observações no cluster 1, o LDA prevê corretamente que 12 estão no cluster 1, mas prediz erroneamente que 2 estão no cluster 2 e 0 estão no cluster 3.</p>
<p>A precisão geral da previsão pode ser obtida da seguinte forma:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="análise-de-cluster-para-segmentação.html#cb39-1"></a><span class="kw">prop.table</span>(ct) <span class="co"># get percentages</span></span></code></pre></div>
<pre><code>##      
##        lda1  lda2  lda3
##   cl1 0.300 0.050 0.000
##   cl2 0.075 0.300 0.075
##   cl3 0.050 0.075 0.075</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="análise-de-cluster-para-segmentação.html#cb41-1"></a><span class="co"># add the percentages on the diagonal</span></span>
<span id="cb41-2"><a href="análise-de-cluster-para-segmentação.html#cb41-2"></a><span class="kw">sum</span>(<span class="kw">diag</span>(<span class="kw">prop.table</span>(ct))) <span class="co"># Proportion correctly predicted</span></span></code></pre></div>
<pre><code>## [1] 0.675</code></pre>
<p>Digamos que desejamos prever a participação no cluster de novas pessoas para as quais temos apenas renda, idade e status profissional, mas não sua participação no cluster. Poderíamos olhar para a fórmula que o LDA derivou dos dados de pessoas para as quais tínhamos membros do cluster:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="análise-de-cluster-para-segmentação.html#cb43-1"></a>lda.cluster3.formula &lt;-<span class="st"> </span><span class="kw">lda</span>(km.group <span class="op">~</span><span class="st"> </span>income <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>professional, <span class="dt">data=</span>equipment, <span class="dt">CV=</span><span class="ot">FALSE</span>) <span class="co"># CV = FALSE ensures that we view the formula that we can use for prediction</span></span>
<span id="cb43-2"><a href="análise-de-cluster-para-segmentação.html#cb43-2"></a>lda.cluster3.formula</span></code></pre></div>
<pre><code>## Call:
## lda(km.group ~ income + age + professional, data = equipment, 
##     CV = FALSE)
## 
## Prior probabilities of groups:
##  cl1  cl2  cl3 
## 0.35 0.45 0.20 
## 
## Group means:
##       income      age professionalprofessional
## cl1 32.14286 30.92857                0.5000000
## cl2 48.33333 44.22222                0.3333333
## cl3 47.50000 49.00000                0.7500000
## 
## Coefficients of linear discriminants:
##                                 LD1         LD2
## income                   0.02718175 -0.04456448
## age                      0.08017200  0.03838914
## professionalprofessional 0.42492950  2.10385035
## 
## Proportion of trace:
##    LD1    LD2 
## 0.7776 0.2224</code></pre>
<p>Vemos que o LDA manteve duas dimensões discriminantes (e é aqui que difere da regressão logística, que é unidimensional). A primeira dimensão explica 77,76 por cento da variância em km.group, a segunda dimensão explica 22,24 por cento da variância em km.group. A tabela com coeficientes nos dá a fórmula para cada dimensão:</p>
<p>Pontuação Discriminante 1 = 0,03 × renda + 0,08 x idade + 0,42 × Pontuação profissional e discriminante 2 = -0,04 × renda + 0,04 × idade + 2,1 × profissional.</p>
<p>Para atribuir novas observações a um determinado cluster, primeiro precisamos calcular as pontuações discriminantes médias dos clusters e de cada nova observação (preenchendo os valores (médios) de renda, idade e profissional de cada cluster ou observação no discriminante ), calcule as distâncias geométricas entre as pontuações discriminantes das novas observações e as pontuações discriminantes médias dos clusters e, finalmente, atribua cada observação ao cluster que está mais próximo no espaço geométrico. Isso é uma chatice, por isso temos sorte de o R fornecer uma maneira simples de fazer isso.</p>
<p>Vamos criar algumas novas observações primeiro:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="análise-de-cluster-para-segmentação.html#cb45-1"></a><span class="co"># the tibble function can be used to create a new data frame</span></span>
<span id="cb45-2"><a href="análise-de-cluster-para-segmentação.html#cb45-2"></a>new_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">income =</span> <span class="kw">c</span>(<span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">35</span>, <span class="dv">35</span>), <span class="co"># to define a variable within the data frame, first provide the name of the variable (income), then provide the values</span></span>
<span id="cb45-3"><a href="análise-de-cluster-para-segmentação.html#cb45-3"></a>                   <span class="dt">age =</span> <span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">35</span>, <span class="dv">45</span>, <span class="dv">60</span>),</span>
<span id="cb45-4"><a href="análise-de-cluster-para-segmentação.html#cb45-4"></a>                   <span class="dt">professional =</span> <span class="kw">c</span>(<span class="st">&quot;professional&quot;</span>,<span class="st">&quot;non-professional&quot;</span>,<span class="st">&quot;non-professional&quot;</span>,<span class="st">&quot;professional&quot;</span>))</span>
<span id="cb45-5"><a href="análise-de-cluster-para-segmentação.html#cb45-5"></a></span>
<span id="cb45-6"><a href="análise-de-cluster-para-segmentação.html#cb45-6"></a><span class="co"># check out the new data:</span></span>
<span id="cb45-7"><a href="análise-de-cluster-para-segmentação.html#cb45-7"></a>new_data</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   income   age professional    
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;           
## 1     65    20 professional    
## 2     65    35 non-professional
## 3     35    45 non-professional
## 4     35    60 professional</code></pre>
<p>Agora vamos prever a associação do cluster para essas “novas” pessoas:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="análise-de-cluster-para-segmentação.html#cb47-1"></a>new_data &lt;-<span class="st"> </span>new_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb47-2"><a href="análise-de-cluster-para-segmentação.html#cb47-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prediction =</span> <span class="kw">predict</span>(lda.cluster3.formula, new_data)<span class="op">$</span>class) </span>
<span id="cb47-3"><a href="análise-de-cluster-para-segmentação.html#cb47-3"></a><span class="co"># Create a new column called prediction in the new_data data frame and store in that the prediction, </span></span>
<span id="cb47-4"><a href="análise-de-cluster-para-segmentação.html#cb47-4"></a><span class="co"># accessed by $class, for the new_data based on the formula from the LDA based on the old data (use the LDA where CV = FALSE).</span></span>
<span id="cb47-5"><a href="análise-de-cluster-para-segmentação.html#cb47-5"></a></span>
<span id="cb47-6"><a href="análise-de-cluster-para-segmentação.html#cb47-6"></a><span class="co"># have a look at the prediction:</span></span>
<span id="cb47-7"><a href="análise-de-cluster-para-segmentação.html#cb47-7"></a>new_data</span></code></pre></div>
<pre><code>## # A tibble: 4 x 4
##   income   age professional     prediction
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;            &lt;fct&gt;     
## 1     65    20 professional     cl1       
## 2     65    35 non-professional cl2       
## 3     35    45 non-professional cl2       
## 4     35    60 professional     cl3</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="análise-de-componentes-principais-para-mapas-perceptivos-toothpaste-dataset.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rhozon/rparamkt/edit/master/07-Cluster.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/rhozon/rparamkt/blob/master/07-Cluster.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
